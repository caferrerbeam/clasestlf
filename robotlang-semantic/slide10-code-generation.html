<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide 10: Generaci√≥n de C√≥digo desde el AST | Universidad EAM</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        .slide-header {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
        }

        .phase-badge {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border: 3px solid #3b82f6;
            padding: 1.5rem;
            border-radius: 1rem;
            margin: 2rem 0;
            text-align: center;
            color: #1e293b;
        }

        .concept-section {
            background: white;
            border-left: 4px solid #f59e0b;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-sm);
            color: #1e293b;
        }

        .challenge-box {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 2px solid #ef4444;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            color: #1e293b;
        }

        .solution-box {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid #10b981;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            color: #1e293b;
        }

        .architecture-box {
            background: linear-gradient(135deg, #ede9fe, #ddd6fe);
            border: 2px solid #8b5cf6;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            color: #1e293b;
        }

        .example-box {
            background: #f8fafc;
            border: 2px dashed #64748b;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
            color: #1e293b;
        }

        .translation-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1.5rem;
            margin: 2rem 0;
            align-items: start;
        }

        .translation-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #f59e0b;
            padding-top: 2rem;
        }

        .code-column {
            background: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 2px solid #e2e8f0;
            color: #1e293b;
        }

        .code-column h4 {
            margin-top: 0;
            color: #1e293b;
        }

        .phase-timeline {
            position: relative;
            padding-left: 3rem;
            margin: 2rem 0;
        }

        .phase-item {
            position: relative;
            padding: 1.5rem;
            margin-bottom: 2rem;
            background: white;
            border-radius: 0.75rem;
            border-left: 4px solid #f59e0b;
            box-shadow: var(--shadow-sm);
            color: #1e293b;
        }

        .phase-item::before {
            content: attr(data-number);
            position: absolute;
            left: -3rem;
            top: 1.5rem;
            width: 2.5rem;
            height: 2.5rem;
            background: #f59e0b;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .visitor-pattern-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 3px solid #f59e0b;
            padding: 2rem;
            border-radius: 1rem;
            margin: 2rem 0;
            color: #1e293b;
        }

        .key-insight {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border-left: 4px solid #3b82f6;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            color: #1e293b;
        }

        .challenge-list {
            list-style: none;
            padding: 0;
        }

        .challenge-list li {
            padding: 1rem;
            margin: 0.5rem 0;
            background: white;
            border-radius: 0.5rem;
            border-left: 4px solid #ef4444;
            color: #1e293b;
        }

        .challenge-list li strong {
            color: #ef4444;
        }

        @media (max-width: 768px) {
            .translation-grid {
                grid-template-columns: 1fr;
            }

            .translation-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <main class="container">
        <!-- Header -->
        <div class="slide-header">
            <h1>üéØ Slide 10: Generaci√≥n de C√≥digo desde el AST</h1>
            <p style="font-size: 1.2rem; margin-top: 1rem;">
                Del √Årbol de Sintaxis Abstracta al C√≥digo Ejecutable
            </p>
            <p style="margin-top: 0.5rem; opacity: 0.9;">
                C√≥mo convertir la representaci√≥n abstracta del programa en c√≥digo JavaScript ejecutable
            </p>
        </div>

        <!-- Objetivo -->
        <div class="phase-badge">
            <h3 style="margin: 0; color: #1e293b;">üìö Objetivo de Aprendizaje</h3>
            <p style="margin-top: 1rem; font-size: 1.1rem; color: #1e293b;">
                Comprender el proceso de generaci√≥n de c√≥digo, sus desaf√≠os t√©cnicos,
                y c√≥mo implementar un generador usando el patr√≥n Visitor.
            </p>
        </div>

        <!-- ¬øQu√© es la Generaci√≥n de C√≥digo? -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üîß ¬øQu√© es la Generaci√≥n de C√≥digo?</h2>

            <div class="concept-section">
                <h3 style="color: #1e293b;">Definici√≥n</h3>
                <p>
                    La <strong>generaci√≥n de c√≥digo</strong> es la fase final del compilador donde el AST
                    (√Årbol de Sintaxis Abstracta) se transforma en c√≥digo ejecutable en el lenguaje destino.
                </p>
                <p style="margin-top: 1rem;">
                    En nuestro caso: <code>RoboLang AST ‚Üí JavaScript ejecutable</code>
                </p>
            </div>

            <div class="key-insight">
                <h4 style="color: #1e293b;">üí° Idea Clave</h4>
                <p>
                    El generador de c√≥digo <strong>recorre el AST</strong> y para cada nodo genera
                    el c√≥digo equivalente en el lenguaje destino. Es como "traducir" de un idioma a otro,
                    pero manteniendo exactamente la misma l√≥gica.
                </p>
            </div>
        </div>

        <!-- Pipeline del Compilador -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üîÑ Pipeline Completo del Compilador</h2>

            <div class="mermaid">
graph LR
    A[C√≥digo RoboLang] -->|Lexer| B[Tokens]
    B -->|Parser| C[AST]
    C -->|Semantic| D[AST Validado]
    D -->|Code Gen| E[JavaScript]
    E -->|Runtime| F[Ejecuci√≥n]

    style A fill:#fef3c7,stroke:#f59e0b,stroke-width:3px,color:#1e293b
    style E fill:#dcfce7,stroke:#10b981,stroke-width:3px,color:#1e293b
    style D fill:#dbeafe,stroke:#3b82f6,stroke-width:2px,color:#1e293b
    style F fill:#fce7f3,stroke:#ec4899,stroke-width:2px,color:#1e293b
            </div>

            <div class="example-box">
                <h4 style="color: #1e293b;">üìç Estamos aqu√≠: Code Generation</h4>
                <p>
                    Ya tenemos un AST validado sem√°nticamente. Ahora necesitamos convertirlo
                    en c√≥digo JavaScript que pueda ejecutarse en un navegador o Node.js.
                </p>
            </div>
        </div>

        <!-- Ejemplo Completo de Traducci√≥n -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üìñ Ejemplo: De RoboLang a JavaScript</h2>

            <div class="translation-grid">
                <div class="code-column">
                    <h4>RoboLang (C√≥digo Fuente)</h4>
                    <pre><code class="language-robolang">VAR pasos;
pasos := 3;

FUNCTION moverCuadrado(lado) {
    REPEAT lado {
        UP;
        RIGHT;
    }
}

MAIN {
    IF (BATTERY > 50) {
        moverCuadrado(pasos);
    }
}</code></pre>
                </div>

                <div class="translation-arrow">
                    ‚ûú
                </div>

                <div class="code-column">
                    <h4>JavaScript (C√≥digo Generado)</h4>
                    <pre><code class="language-javascript">const robot = RoboLangRuntime.getRobot();

let pasos;

async function moverCuadrado(lado) {
    for (let _i0 = 0; _i0 < lado; _i0++) {
        await robot.moveUp();
        await robot.moveRight();
    }
}

async function main() {
    pasos = 3;
    if (robot.getSensor('BATTERY') > 50) {
        await moverCuadrado(pasos);
    }
}

main().catch(err => console.error(err));</code></pre>
                </div>
            </div>

            <div class="key-insight">
                <h4 style="color: #1e293b;">üîç Observa las Transformaciones</h4>
                <ul style="margin-top: 1rem;">
                    <li><code>VAR pasos</code> ‚Üí <code>let pasos</code></li>
                    <li><code>FUNCTION</code> ‚Üí <code>async function</code></li>
                    <li><code>REPEAT lado</code> ‚Üí <code>for (let _i0 = 0; _i0 < lado; _i0++)</code></li>
                    <li><code>UP;</code> ‚Üí <code>await robot.moveUp();</code></li>
                    <li><code>BATTERY</code> ‚Üí <code>robot.getSensor('BATTERY')</code></li>
                </ul>
            </div>
        </div>

        <!-- Mapeo Completo: RoboLang ‚Üî JavaScript -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #10b981;">üìã Mapeo Completo: RoboLang ‚Üî JavaScript</h2>

            <div class="key-insight">
                <h4 style="color: #1e293b;">üéØ Gu√≠a de Referencia Completa</h4>
                <p>
                    A continuaci√≥n se presenta el mapeo completo de todas las construcciones de RoboLang
                    a su equivalente en JavaScript. Esta es tu gu√≠a de referencia para implementar el generador.
                </p>
            </div>

            <!-- 1. COMANDOS B√ÅSICOS -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #3b82f6; border-bottom: 3px solid #3b82f6; padding-bottom: 0.5rem;">
                    ü§ñ 1. Comandos B√°sicos de Movimiento
                </h3>

                <div class="translation-grid" style="margin-top: 1.5rem;">
                    <div class="code-column">
                        <h4>RoboLang</h4>
                        <pre><code class="language-robolang">UP;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript</h4>
                        <pre><code class="language-javascript">await robot.moveUp();</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">DOWN;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">await robot.moveDown();</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">LEFT;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">await robot.moveLeft();</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">RIGHT;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">await robot.moveRight();</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">PENUP;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">robot.penUp();</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">PENDOWN;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">robot.penDown();</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <p><strong>Nota:</strong> Los comandos de movimiento (UP, DOWN, LEFT, RIGHT) requieren <code>await</code>
                    porque son operaciones as√≠ncronas con animaci√≥n. Los comandos de pen (PENUP, PENDOWN) son s√≠ncronos.</p>
                </div>
            </div>

            <!-- 2. ESTRUCTURAS DE CONTROL -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #f59e0b; border-bottom: 3px solid #f59e0b; padding-bottom: 0.5rem;">
                    üîÑ 2. Estructuras de Control
                </h3>

                <h4 style="color: #1e293b; margin-top: 2rem;">REPEAT (con n√∫mero literal)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <h4>RoboLang</h4>
                        <pre><code class="language-robolang">REPEAT 5 {
    UP;
    RIGHT;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript</h4>
                        <pre><code class="language-javascript">for (let i = 0; i < 5; i++) {
    await robot.moveUp();
    await robot.moveRight();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">REPEAT (con variable)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">VAR pasos;
pasos := 3;

REPEAT pasos {
    UP;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">let pasos;
pasos = 3;

for (let i = 0; i < pasos; i++) {
    await robot.moveUp();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">IF (sin ELSE)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (BATTERY > 50) {
    UP;
    RIGHT;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (robot.getSensor('BATTERY') > 50) {
    await robot.moveUp();
    await robot.moveRight();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">IF-ELSE</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (DIST > 10) {
    UP;
} ELSE {
    DOWN;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (robot.getSensor('DIST') > 10) {
    await robot.moveUp();
} else {
    await robot.moveDown();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">WHILE</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">WHILE (BATTERY > 20) {
    UP;
    RIGHT;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">while (robot.getSensor('BATTERY') > 20) {
    await robot.moveUp();
    await robot.moveRight();
}</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <p><strong>Nota:</strong> REPEAT se traduce a <code>for</code> loop con contador √∫nico (_i0, _i1, _i2...)
                    para evitar conflictos en loops anidados.</p>
                </div>
            </div>

            <!-- 3. VARIABLES -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #8b5cf6; border-bottom: 3px solid #8b5cf6; padding-bottom: 0.5rem;">
                    üì¶ 3. Variables
                </h3>

                <h4 style="color: #1e293b; margin-top: 2rem;">Declaraci√≥n</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <h4>RoboLang</h4>
                        <pre><code class="language-robolang">VAR contador;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript</h4>
                        <pre><code class="language-javascript">let contador;</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Asignaci√≥n (n√∫mero)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">contador := 10;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">contador = 10;</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Asignaci√≥n (sensor)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">VAR temperatura;
temperatura := TEMP;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">let temperatura;
temperatura = robot.getSensor('TEMP');</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Asignaci√≥n (booleano)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">VAR activo;
activo := true;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">let activo;
activo = true;</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Asignaci√≥n (identificador)</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">VAR x;
VAR y;
x := 5;
y := x;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">let x;
let y;
x = 5;
y = x;</code></pre>
                    </div>
                </div>
            </div>

            <!-- 4. FUNCIONES -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #ec4899; border-bottom: 3px solid #ec4899; padding-bottom: 0.5rem;">
                    ‚öôÔ∏è 4. Funciones (v3.0)
                </h3>

                <h4 style="color: #1e293b; margin-top: 2rem;">Funci√≥n sin par√°metros</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <h4>RoboLang</h4>
                        <pre><code class="language-robolang">FUNCTION avanzar() {
    UP;
    RIGHT;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript</h4>
                        <pre><code class="language-javascript">async function avanzar() {
    await robot.moveUp();
    await robot.moveRight();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Funci√≥n con par√°metros</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">FUNCTION moverCuadrado(lado) {
    REPEAT lado {
        UP;
        RIGHT;
    }
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">async function moverCuadrado(lado) {
    for (let i = 0; i < lado; i++) {
        await robot.moveUp();
        await robot.moveRight();
    }
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Funci√≥n MAIN</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">MAIN {
    UP;
    RIGHT;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">async function main() {
    await robot.moveUp();
    await robot.moveRight();
}

main().catch(err => console.error('Error:', err));</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">RETURN sin valor</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">FUNCTION verificar() {
    IF (BATTERY < 10) {
        RETURN;
    }
    UP;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">async function verificar() {
    if (robot.getSensor('BATTERY') < 10) {
        return;
    }
    await robot.moveUp();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">RETURN con valor</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">FUNCTION calcular() {
    VAR resultado;
    resultado := 42;
    RETURN resultado;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">async function calcular() {
    let resultado;
    resultado = 42;
    return resultado;
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Llamada a funci√≥n</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">MAIN {
    moverCuadrado(5);
    avanzar();
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">async function main() {
    await moverCuadrado(5);
    await avanzar();
}</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <p><strong>Nota:</strong> Todas las funciones son <code>async</code> porque pueden contener comandos de movimiento.
                    Las llamadas a funciones requieren <code>await</code>.</p>
                </div>
            </div>

            <!-- 5. EXPRESIONES L√ìGICAS -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #06b6d4; border-bottom: 3px solid #06b6d4; padding-bottom: 0.5rem;">
                    üßÆ 5. Expresiones L√≥gicas y Comparaciones
                </h3>

                <h4 style="color: #1e293b; margin-top: 2rem;">Operadores de Comparaci√≥n</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <h4>RoboLang</h4>
                        <pre><code class="language-robolang">IF (DIST = 5) { }</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript</h4>
                        <pre><code class="language-javascript">if (robot.getSensor('DIST') === 5) { }</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (BATTERY != 0) { }</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (robot.getSensor('BATTERY') !== 0) { }</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (TEMP < 30) { }
IF (TEMP <= 30) { }
IF (TEMP > 30) { }
IF (TEMP >= 30) { }</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (robot.getSensor('TEMP') < 30) { }
if (robot.getSensor('TEMP') <= 30) { }
if (robot.getSensor('TEMP') > 30) { }
if (robot.getSensor('TEMP') >= 30) { }</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Operador AND</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (BATTERY > 50 AND DIST < 10) {
    UP;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (robot.getSensor('BATTERY') > 50 &&
    robot.getSensor('DIST') < 10) {
    await robot.moveUp();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Operador OR</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (BATTERY < 20 OR OBSTACLE) {
    RETURN;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (robot.getSensor('BATTERY') < 20 ||
    robot.getSensor('OBSTACLE')) {
    return;
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Operador NOT</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF (NOT OBSTACLE) {
    UP;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if (!(robot.getSensor('OBSTACLE'))) {
    await robot.moveUp();
}</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Expresiones complejas</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">IF ((BATTERY > 50 AND NOT OBSTACLE)
    OR TEMP < 20) {
    UP;
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">if ((robot.getSensor('BATTERY') > 50 &&
     !(robot.getSensor('OBSTACLE'))) ||
    robot.getSensor('TEMP') < 20) {
    await robot.moveUp();
}</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <p><strong>Nota:</strong> RoboLang usa <code>=</code> para igualdad, JavaScript usa <code>===</code>.
                    Los operadores <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> se mantienen iguales.</p>
                </div>
            </div>

            <!-- 6. SENSORES -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #14b8a6; border-bottom: 3px solid #14b8a6; padding-bottom: 0.5rem;">
                    üì° 6. Sensores
                </h3>

                <h4 style="color: #1e293b; margin-top: 2rem;">Sensores Num√©ricos</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <h4>RoboLang</h4>
                        <pre><code class="language-robolang">DIST</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript</h4>
                        <pre><code class="language-javascript">robot.getSensor('DIST')</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">TEMP</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">robot.getSensor('TEMP')</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">LIGHT</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">robot.getSensor('LIGHT')</code></pre>
                    </div>
                </div>

                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">BATTERY</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">robot.getSensor('BATTERY')</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Sensor Booleano</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">OBSTACLE</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">robot.getSensor('OBSTACLE')</code></pre>
                    </div>
                </div>

                <h4 style="color: #1e293b; margin-top: 2rem;">Uso en asignaciones</h4>
                <div class="translation-grid">
                    <div class="code-column">
                        <pre><code class="language-robolang">VAR distancia;
distancia := DIST;</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <pre><code class="language-javascript">let distancia;
distancia = robot.getSensor('DIST');</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <p><strong>Nota:</strong> Todos los sensores se acceden mediante <code>robot.getSensor('NOMBRE')</code>.
                    Los sensores num√©ricos retornan n√∫meros, OBSTACLE retorna un booleano.</p>
                </div>
            </div>

            <!-- 7. ESTRUCTURA COMPLETA DEL PROGRAMA -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #ef4444; border-bottom: 3px solid #ef4444; padding-bottom: 0.5rem;">
                    üìÑ 7. Estructura Completa del Programa
                </h3>

                <div class="translation-grid" style="margin-top: 1.5rem;">
                    <div class="code-column">
                        <h4>RoboLang (Programa Completo)</h4>
                        <pre><code class="language-robolang">VAR pasos;
VAR limite;

FUNCTION mover(n) {
    REPEAT n {
        UP;
        RIGHT;
    }
}

MAIN {
    pasos := 3;
    limite := 10;

    IF (BATTERY > 50) {
        mover(pasos);
    } ELSE {
        mover(limite);
    }
}</code></pre>
                    </div>
                    <div class="translation-arrow">‚Üí</div>
                    <div class="code-column">
                        <h4>JavaScript (C√≥digo Generado)</h4>
                        <pre><code class="language-javascript">// ============================================
// RoboLang Compiled Program
// Generated by JavaScriptCodeGenerator
// ============================================

const robot = RoboLangRuntime.getRobot();

let pasos;
let limite;

async function mover(n) {
    for (let i = 0; i < n; i++) {
        await robot.moveUp();
        await robot.moveRight();
    }
}

async function main() {
    pasos = 3;
    limite = 10;

    if (robot.getSensor('BATTERY') > 50) {
        await mover(pasos);
    } else {
        await mover(limite);
    }
}

// Execute
main().catch(err => console.error('Error:', err));</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <h4 style="color: #1e293b;">üéØ Elementos Clave del C√≥digo Generado</h4>
                    <ul style="margin-top: 1rem; line-height: 2;">
                        <li><strong>Header con comentarios:</strong> Identifica el c√≥digo como generado por RoboLang</li>
                        <li><strong>Robot instance:</strong> <code>const robot = RoboLangRuntime.getRobot();</code></li>
                        <li><strong>Variables globales:</strong> Declaradas antes de las funciones</li>
                        <li><strong>Funciones async:</strong> Todas las funciones son <code>async</code></li>
                        <li><strong>Funci√≥n main():</strong> Punto de entrada del programa</li>
                        <li><strong>Ejecuci√≥n:</strong> <code>main().catch(err => console.error('Error:', err));</code></li>
                    </ul>
                </div>
            </div>

            <div class="visitor-pattern-box" style="margin-top: 2rem;">
                <h3 style="color: #1e293b;">‚úÖ Checklist de Implementaci√≥n</h3>
                <p style="margin-top: 1rem;">Al implementar tu generador, aseg√∫rate de cubrir:</p>
                <ul style="margin-top: 1rem; line-height: 2;">
                    <li>‚úì Los 6 comandos b√°sicos (UP, DOWN, LEFT, RIGHT, PENUP, PENDOWN)</li>
                    <li>‚úì Las 3 estructuras de control (REPEAT, IF/ELSE, WHILE)</li>
                    <li>‚úì Variables (declaraci√≥n con VAR, asignaci√≥n con :=)</li>
                    <li>‚úì Funciones (FUNCTION, MAIN, RETURN, llamadas)</li>
                    <li>‚úì Los 3 operadores l√≥gicos (AND, OR, NOT)</li>
                    <li>‚úì Los 6 operadores de comparaci√≥n (=, !=, &lt;, &lt;=, &gt;, &gt;=)</li>
                    <li>‚úì Los 5 sensores (DIST, TEMP, LIGHT, BATTERY, OBSTACLE)</li>
                    <li>‚úì Generaci√≥n de nombres √∫nicos para loops anidados</li>
                    <li>‚úì Indentaci√≥n correcta del c√≥digo generado</li>
                    <li>‚úì Conversi√≥n de = a === en JavaScript</li>
                </ul>
            </div>
        </div>

        <!-- Los 7 Retos de la Generaci√≥n de C√≥digo -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #ef4444;">‚ö†Ô∏è Los 7 Retos de la Generaci√≥n de C√≥digo</h2>

            <div class="challenge-box">
                <h3 style="color: #1e293b;">¬øPor qu√© es dif√≠cil generar c√≥digo?</h3>
                <p>
                    Generar c√≥digo correcto y eficiente requiere resolver varios desaf√≠os t√©cnicos:
                </p>
            </div>

            <ul class="challenge-list">
                <li>
                    <strong>1. Preservar Sem√°ntica:</strong>
                    El c√≥digo generado debe hacer <em>exactamente</em> lo mismo que el c√≥digo fuente.
                    Un error aqu√≠ cambia el comportamiento del programa.
                </li>

                <li>
                    <strong>2. Mapeo de Construcciones:</strong>
                    Cada construcci√≥n de RoboLang debe mapearse a JavaScript.
                    Ejemplo: ¬øC√≥mo traducir <code>REPEAT n</code>? ‚Üí <code>for</code> loop
                </li>

                <li>
                    <strong>3. Nombres √önicos:</strong>
                    Generar variables temporales sin conflictos.
                    Ejemplo: loops anidados necesitan <code>_i0</code>, <code>_i1</code>, <code>_i2</code>...
                </li>

                <li>
                    <strong>4. Gesti√≥n de Contexto:</strong>
                    Saber en qu√© funci√≥n estamos, nivel de indentaci√≥n, scope actual, etc.
                </li>

                <li>
                    <strong>5. C√≥digo Legible:</strong>
                    Generar c√≥digo formateado, con indentaci√≥n correcta y comentarios √∫tiles.
                </li>

                <li>
                    <strong>6. Async/Await:</strong>
                    JavaScript requiere <code>async/await</code> para animaciones.
                    Saber cu√°ndo agregar <code>await</code> es crucial.
                </li>

                <li>
                    <strong>7. Manejo de Errores:</strong>
                    ¬øQu√© pasa si encontramos un nodo del AST que no sabemos traducir?
                </li>
            </ul>
        </div>

        <!-- Explicaci√≥n Detallada: Variables con Contador -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #ef4444;">üîç Profundizando: ¬øPor qu√© Variables con Contador?</h2>

            <div class="challenge-box">
                <h3 style="color: #1e293b;">‚ùì El Problema de los Loops Anidados</h3>
                <p style="font-size: 1.1rem;">
                    Cuando traduces <code>REPEAT</code> a <code>for</code>, necesitas una variable
                    para el contador del loop. Pero, ¬øqu√© pasa si hay loops <strong>dentro de otros loops</strong>?
                </p>
            </div>

            <div class="example-box" style="margin-top: 2rem;">
                <h4 style="color: #1e293b;">Programa RoboLang con Loops Anidados</h4>
                <pre><code class="language-robolang">MAIN {
    REPEAT 3 {           // Loop externo
        REPEAT 4 {       // Loop interno
            UP;
        }
        RIGHT;
    }
}</code></pre>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="color: #ef4444;">‚ùå Intento Incorrecto: Usar siempre la misma variable "i"</h3>
                <div style="background: #fee2e2; padding: 1.5rem; border-radius: 0.75rem; border: 3px solid #ef4444; margin-top: 1rem;">
                    <pre><code class="language-javascript">// ¬°C√ìDIGO INCORRECTO!
for (let i = 0; i < 3; i++) {        // Loop externo usa 'i'
    for (let i = 0; i < 4; i++) {    // ‚ùå Loop interno tambi√©n usa 'i'
        await robot.moveUp();
    }
    await robot.moveRight();
}</code></pre>
                </div>

                <div class="challenge-box" style="margin-top: 1rem;">
                    <h4 style="color: #1e293b;">‚ö†Ô∏è ¬øQu√© est√° mal aqu√≠?</h4>
                    <ul style="line-height: 2;">
                        <li><strong>Conflicto de nombres:</strong> Ambos loops usan la variable <code>i</code></li>
                        <li><strong>Shadowing:</strong> El <code>i</code> interno "oculta" el externo</li>
                        <li><strong>Comportamiento inesperado:</strong> Pierde el control del loop externo</li>
                        <li><strong>Error sem√°ntico:</strong> No hace lo que deber√≠a hacer</li>
                    </ul>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="color: #10b981;">‚úÖ Soluci√≥n Correcta: Variables √önicas con Contador</h3>
                <div style="background: #dcfce7; padding: 1.5rem; border-radius: 0.75rem; border: 3px solid #10b981; margin-top: 1rem;">
                    <pre><code class="language-javascript">// ‚úì C√ìDIGO CORRECTO
for (let _i0 = 0; _i0 < 3; _i0++) {    // Loop externo usa '_i0'
    for (let _i1 = 0; _i1 < 4; _i1++) {  // ‚úì Loop interno usa '_i1'
        await robot.moveUp();
    }
    await robot.moveRight();
}</code></pre>
                </div>

                <div class="solution-box" style="margin-top: 1rem;">
                    <h4 style="color: #1e293b;">‚ú® ¬øPor qu√© funciona?</h4>
                    <ul style="line-height: 2;">
                        <li><strong>Nombres √∫nicos:</strong> <code>_i0</code> y <code>_i1</code> son variables diferentes</li>
                        <li><strong>Sin conflictos:</strong> Cada loop tiene su propio contador independiente</li>
                        <li><strong>Comportamiento correcto:</strong> El loop externo itera 3 veces, el interno 4 veces</li>
                        <li><strong>Escalable:</strong> Podemos tener <code>_i2</code>, <code>_i3</code>, etc. para m√°s anidamiento</li>
                    </ul>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="color: #3b82f6;">üîß C√≥mo Funciona el Contador</h3>

                <div class="key-insight">
                    <h4 style="color: #1e293b;">üí° Mecanismo del Generador</h4>
                    <p>El generador mantiene un <strong>contador global</strong> que se incrementa cada vez que genera un loop:</p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1.5rem;">
                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #64748b;">
                        <h4 style="color: #1e293b;">C√≥digo Java del Generador</h4>
                        <pre><code class="language-java">class JavaScriptCodeGenerator {
    private int loopCounter = 0;  // Inicia en 0

    String visitRepeatStatement(node) {
        // Generar nombre √∫nico
        String varName = "_i" + loopCounter++;

        // varName ser√°: "_i0", "_i1", "_i2", ...

        writeLine("for (let " + varName + " = 0; ...");
        // ...
    }
}</code></pre>
                    </div>

                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #64748b;">
                        <h4 style="color: #1e293b;">Secuencia de Generaci√≥n</h4>
                        <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 0.5rem;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #e2e8f0;">
                                        <th style="padding: 0.5rem; text-align: left; border: 1px solid #cbd5e1;">Paso</th>
                                        <th style="padding: 0.5rem; text-align: left; border: 1px solid #cbd5e1;">loopCounter</th>
                                        <th style="padding: 0.5rem; text-align: left; border: 1px solid #cbd5e1;">Variable</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">1¬∫ REPEAT</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">0 ‚Üí 1</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>_i0</code></td>
                                    </tr>
                                    <tr style="background: #f8fafc;">
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">2¬∫ REPEAT</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">1 ‚Üí 2</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>_i1</code></td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">3¬∫ REPEAT</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">2 ‚Üí 3</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>_i2</code></td>
                                    </tr>
                                    <tr style="background: #f8fafc;">
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">...</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">...</td>
                                        <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="color: #8b5cf6;">üìä Ejemplo Completo: 3 Niveles de Anidamiento</h3>

                <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1.5rem; margin-top: 1rem; align-items: start;">
                    <div style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #f59e0b;">
                        <h4 style="color: #1e293b;">RoboLang</h4>
                        <pre style="margin-top: 0.5rem;"><code class="language-robolang">MAIN {
    REPEAT 2 {
        REPEAT 3 {
            REPEAT 4 {
                UP;
            }
        }
    }
}</code></pre>
                    </div>

                    <div style="font-size: 2rem; color: #f59e0b; padding-top: 3rem;">
                        ‚Üí
                    </div>

                    <div style="background: #dcfce7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #10b981;">
                        <h4 style="color: #1e293b;">JavaScript</h4>
                        <pre style="margin-top: 0.5rem;"><code class="language-javascript">async function main() {
    for (let _i0 = 0; _i0 < 2; _i0++) {
        for (let _i1 = 0; _i1 < 3; _i1++) {
            for (let _i2 = 0; _i2 < 4; _i2++) {
                await robot.moveUp();
            }
        }
    }
}</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1.5rem;">
                    <h4 style="color: #1e293b;">üéØ Resultado</h4>
                    <ul style="line-height: 2;">
                        <li><code>_i0</code> controla el loop m√°s externo (2 iteraciones)</li>
                        <li><code>_i1</code> controla el loop medio (3 iteraciones)</li>
                        <li><code>_i2</code> controla el loop m√°s interno (4 iteraciones)</li>
                        <li><strong>Total de movimientos UP:</strong> 2 √ó 3 √ó 4 = 24 veces ‚úì</li>
                    </ul>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="color: #f59e0b;">ü§î Preguntas Frecuentes</h3>

                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #3b82f6; margin-top: 1rem;">
                    <h4 style="color: #3b82f6;">P: ¬øPor qu√© usar <code>_i</code> y no solo <code>i</code>?</h4>
                    <p><strong>R:</strong> El gui√≥n bajo <code>_</code> indica que es una variable generada autom√°ticamente,
                       no una del programa original. Es una convenci√≥n que ayuda a distinguirlas.</p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #3b82f6; margin-top: 1rem;">
                    <h4 style="color: #3b82f6;">P: ¬øQu√© pasa si el usuario define una variable llamada <code>_i0</code>?</h4>
                    <p><strong>R:</strong> En una implementaci√≥n completa, el generador deber√≠a verificar
                       que no existan conflictos con variables del usuario. Se puede usar un prefijo m√°s √∫nico como
                       <code>__loop_0</code> o verificar en la tabla de s√≠mbolos.</p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #3b82f6; margin-top: 1rem;">
                    <h4 style="color: #3b82f6;">P: ¬øEl contador se reinicia para cada funci√≥n?</h4>
                    <p><strong>R:</strong> Depende de la implementaci√≥n. Generalmente es global para todo el archivo,
                       pero podr√≠a reiniciarse por funci√≥n si quieres. Lo importante es que dentro de un mismo
                       scope no haya conflictos.</p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #3b82f6; margin-top: 1rem;">
                    <h4 style="color: #3b82f6;">P: ¬øHay l√≠mite de cu√°ntos loops anidados puedo tener?</h4>
                    <p><strong>R:</strong> No hay l√≠mite t√©cnico. El contador puede ir de 0 a infinito
                       (<code>_i0</code>, <code>_i1</code>, ..., <code>_i999</code>, etc.). En la pr√°ctica,
                       programas con m√°s de 3-4 niveles de anidamiento son dif√≠ciles de leer.</p>
                </div>
            </div>

            <div class="visitor-pattern-box" style="margin-top: 2rem;">
                <h3 style="color: #1e293b;">üí° Resumen: Variables con Contador</h3>
                <div style="background: white; padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem;">
                    <ul style="line-height: 2.5;">
                        <li>‚úì <strong>Problema:</strong> Loops anidados necesitan variables diferentes</li>
                        <li>‚úì <strong>Soluci√≥n:</strong> Contador global que genera <code>_i0</code>, <code>_i1</code>, <code>_i2</code>...</li>
                        <li>‚úì <strong>Implementaci√≥n:</strong> <code>loopCounter++</code> en cada <code>visitRepeatStatement()</code></li>
                        <li>‚úì <strong>Resultado:</strong> C√≥digo JavaScript correcto sin conflictos de nombres</li>
                        <li>‚úì <strong>Convenci√≥n:</strong> Prefijo <code>_</code> indica variable generada autom√°ticamente</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Estado del Generador: Explicaci√≥n Completa -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #8b5cf6;">üß† El Estado del Generador: Toda la Informaci√≥n que Necesita Recordar</h2>

            <div class="visitor-pattern-box">
                <h3 style="color: #1e293b;">ü§î ¬øPor qu√© el generador necesita "estado"?</h3>
                <p style="font-size: 1.1rem;">
                    El generador NO puede simplemente "mirar un nodo y traducirlo". Necesita <strong>recordar contexto</strong>
                    mientras recorre el AST. Piensa en ello como un escritor que necesita recordar en qu√© cap√≠tulo est√°,
                    qu√© personajes ha mencionado, y cu√°ntas veces ha usado una palabra.
                </p>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="color: #3b82f6;">üì¶ Los 4 Componentes del Estado del Generador</h3>

                <div class="architecture-box" style="margin-top: 1.5rem;">
                    <pre><code class="language-java">public class JavaScriptCodeGenerator {
    // 1. Donde construimos el c√≥digo final
    private StringBuilder code;

    // 2. Nivel de indentaci√≥n actual (cu√°ntos tabs)
    private int indentLevel;

    // 3. Contador para nombres √∫nicos de loops
    private int loopCounter;

    // 4. ¬øEn qu√© funci√≥n estamos actualmente?
    private String currentFunction;
}</code></pre>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <h4 style="color: #1e293b;">üí° Cada uno tiene una raz√≥n de existir</h4>
                    <p>Vamos a explicar CADA UNO en detalle con ejemplos concretos.</p>
                </div>
            </div>

            <!-- StringBuilder code -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #10b981;">1Ô∏è‚É£ StringBuilder code - El C√≥digo que Vamos Construyendo</h3>

                <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #10b981; margin-top: 1rem;">
                    <h4 style="color: #1e293b;">¬øQu√© es?</h4>
                    <p>Un <code>StringBuilder</code> es como un documento de texto que puedes ir completando l√≠nea por l√≠nea.</p>
                </div>

                <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1rem; border: 2px solid #64748b;">
                    <h4 style="color: #1e293b;">¬øPor qu√© StringBuilder y no String?</h4>
                    <p><strong>Rendimiento.</strong> En Java, los String son inmutables. Si haces:</p>
                    <pre style="margin-top: 0.5rem;"><code class="language-java">String result = "";
result = result + "linea 1\n";  // Crea nuevo String
result = result + "linea 2\n";  // Crea otro nuevo String
result = result + "linea 3\n";  // Crea otro nuevo String
// ¬°3 objetos String creados y descartados!</code></pre>

                    <p style="margin-top: 1rem;">Con StringBuilder:</p>
                    <pre style="margin-top: 0.5rem;"><code class="language-java">StringBuilder code = new StringBuilder();
code.append("linea 1\n");  // Modifica el buffer interno
code.append("linea 2\n");  // Modifica el mismo buffer
code.append("linea 3\n");  // Modifica el mismo buffer
// ¬°Solo 1 objeto! M√°s eficiente</code></pre>
                </div>

                <div style="background: #dbeafe; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1rem;">
                    <h4 style="color: #1e293b;">üé¨ Ejemplo en Acci√≥n</h4>
                    <pre><code class="language-java">// Al inicio
code = new StringBuilder();

// Visitamos ProgramNode
code.append("const robot = RoboLangRuntime.getRobot();\n");

// Visitamos VariableDeclaration
code.append("let pasos;\n");

// Visitamos FunctionDeclaration
code.append("async function mover() {\n");
code.append("    await robot.moveUp();\n");
code.append("}\n");

// Al final
String resultado = code.toString();  // Convertir a String final</code></pre>
                </div>
            </div>

            <!-- indentLevel -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #f59e0b;">2Ô∏è‚É£ int indentLevel - Nivel de Indentaci√≥n</h3>

                <div style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #f59e0b; margin-top: 1rem;">
                    <h4 style="color: #1e293b;">¬øPara qu√© sirve?</h4>
                    <p>Para que el c√≥digo generado est√© <strong>correctamente formateado</strong> con indentaci√≥n.
                       Sin esto, todo el c√≥digo estar√≠a pegado a la izquierda y ser√≠a ilegible.</p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem;">
                    <div style="background: #fee2e2; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #ef4444;">
                        <h4 style="color: #ef4444;">‚ùå Sin indentLevel</h4>
                        <pre><code class="language-javascript">async function main() {
for (let _i0 = 0; _i0 < 3; _i0++) {
await robot.moveUp();
}
}</code></pre>
                        <p style="margin-top: 0.5rem; color: #991b1b;"><strong>¬°Horrible! No se ve la estructura</strong></p>
                    </div>

                    <div style="background: #dcfce7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #10b981;">
                        <h4 style="color: #10b981;">‚úì Con indentLevel</h4>
                        <pre><code class="language-javascript">async function main() {
    for (let _i0 = 0; _i0 < 3; _i0++) {
        await robot.moveUp();
    }
}</code></pre>
                        <p style="margin-top: 0.5rem; color: #065f46;"><strong>¬°Perfecto! Se ve la jerarqu√≠a</strong></p>
                    </div>
                </div>

                <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1.5rem; border: 2px solid #64748b;">
                    <h4 style="color: #1e293b;">üîß C√≥mo Funciona</h4>

                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <pre><code class="language-java">private int indentLevel = 0;  // Empieza en 0

// Helper para generar espacios de indentaci√≥n
private String indent() {
    return "    ".repeat(indentLevel);  // 4 espacios √ó nivel
}

// Ejemplo de uso
writeLine("async function main() {");
indentLevel++;  // Entramos a la funci√≥n, aumentar
writeLine("for (...) {");
indentLevel++;  // Entramos al loop, aumentar
writeLine("await robot.moveUp();");
indentLevel--;  // Salimos del loop, disminuir
writeLine("}");
indentLevel--;  // Salimos de la funci√≥n, disminuir
writeLine("}");</code></pre>
                    </div>

                    <div style="background: #dbeafe; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h4 style="color: #1e293b;">üìä Seguimiento del indentLevel</h4>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">
                            <thead>
                                <tr style="background: #e2e8f0;">
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: left;">Acci√≥n</th>
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;">indentLevel</th>
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: left;">L√≠nea Generada</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">Inicio de funci√≥n</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;">0</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>async function main() {</code></td>
                                </tr>
                                <tr style="background: #f8fafc;">
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">++</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;">1</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>¬∑¬∑¬∑¬∑for (...) {</code></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">++</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;">2</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑await robot.moveUp();</code></td>
                                </tr>
                                <tr style="background: #f8fafc;">
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">--</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;">1</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>¬∑¬∑¬∑¬∑}</code></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">--</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;">0</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>}</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <h4 style="color: #1e293b;">üéØ Regla Simple</h4>
                    <ul style="line-height: 2;">
                        <li>Cuando ENTRAS a un bloque <code>{</code> ‚Üí <code>indentLevel++</code></li>
                        <li>Cuando SALES de un bloque <code>}</code> ‚Üí <code>indentLevel--</code></li>
                        <li>Cada l√≠nea se escribe con <code>indent()</code> al inicio</li>
                    </ul>
                </div>
            </div>

            <!-- loopCounter -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #ec4899;">3Ô∏è‚É£ int loopCounter - Contador de Loops</h3>

                <div style="background: #fce7f3; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #ec4899; margin-top: 1rem;">
                    <h4 style="color: #1e293b;">¬øPara qu√© sirve?</h4>
                    <p>Para generar <strong>nombres √∫nicos</strong> de variables de loop (<code>_i0</code>, <code>_i1</code>, <code>_i2</code>...)
                       que NO choquen entre s√≠ en loops anidados.</p>
                </div>

                <div style="background: #fee2e2; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #ef4444; margin-top: 1.5rem;">
                    <h4 style="color: #ef4444;">‚ùå Problema sin loopCounter</h4>
                    <p>Si siempre usamos <code>i</code> como variable de loop:</p>
                    <pre style="margin-top: 0.5rem;"><code class="language-javascript">for (let i = 0; i < 3; i++) {        // Loop 1 usa 'i'
    for (let i = 0; i < 4; i++) {    // Loop 2 tambi√©n usa 'i'
        // ‚ùå ¬°CONFLICTO! El 'i' interno oculta al externo
    }
}</code></pre>
                </div>

                <div style="background: #dcfce7; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #10b981; margin-top: 1rem;">
                    <h4 style="color: #10b981;">‚úì Soluci√≥n con loopCounter</h4>
                    <pre><code class="language-javascript">for (let _i0 = 0; _i0 < 3; _i0++) {    // Loop 1 usa '_i0'
    for (let _i1 = 0; _i1 < 4; _i1++) {  // Loop 2 usa '_i1'
        // ‚úì ¬°Sin conflictos! Variables diferentes
    }
}</code></pre>
                </div>

                <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1.5rem; border: 2px solid #64748b;">
                    <h4 style="color: #1e293b;">üé¨ Simulaci√≥n Paso a Paso</h4>

                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h5 style="color: #3b82f6;">Programa RoboLang:</h5>
                        <pre><code class="language-robolang">MAIN {
    REPEAT 2 {        // ‚Üê Loop externo
        UP;
        REPEAT 3 {    // ‚Üê Loop interno
            RIGHT;
        }
    }
}</code></pre>
                    </div>

                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h5 style="color: #3b82f6;">Generaci√≥n paso a paso:</h5>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem;">
                            <thead>
                                <tr style="background: #e2e8f0;">
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1;">Paso</th>
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1;">Nodo visitado</th>
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1;">loopCounter</th>
                                    <th style="padding: 0.5rem; border: 1px solid #cbd5e1;">Variable generada</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">0</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">Inicio</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;"><code>0</code></td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">-</td>
                                </tr>
                                <tr style="background: #fef3c7;">
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">1</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">REPEAT 2</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;"><code>0 ‚Üí 1</code></td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>_i0</code></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">2</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">UP (comando)</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;"><code>1</code></td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">-</td>
                                </tr>
                                <tr style="background: #dcfce7;">
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">3</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">REPEAT 3</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;"><code>1 ‚Üí 2</code></td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;"><code>_i1</code></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">4</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">RIGHT (comando)</td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1; text-align: center;"><code>2</code></td>
                                    <td style="padding: 0.5rem; border: 1px solid #cbd5e1;">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div style="background: #dcfce7; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h5 style="color: #10b981;">‚úì C√≥digo JavaScript generado:</h5>
                        <pre><code class="language-javascript">async function main() {
    for (let _i0 = 0; _i0 < 2; _i0++) {    // loopCounter dio 0
        await robot.moveUp();
        for (let _i1 = 0; _i1 < 3; _i1++) {  // loopCounter dio 1
            await robot.moveRight();
        }
    }
}</code></pre>
                    </div>
                </div>

                <div class="key-insight" style="margin-top: 1rem;">
                    <h4 style="color: #1e293b;">üí° Punto Clave</h4>
                    <p>El <code>loopCounter</code> es un <strong>contador global del generador</strong> que NUNCA se reinicia.
                       Cada vez que visitamos un REPEAT, hacemos <code>loopCounter++</code> y obtenemos un n√∫mero √∫nico.</p>
                </div>
            </div>

            <!-- currentFunction -->
            <div style="margin: 3rem 0;">
                <h3 style="color: #06b6d4;">4Ô∏è‚É£ String currentFunction - Funci√≥n Actual</h3>

                <div style="background: #cffafe; padding: 1.5rem; border-radius: 0.75rem; border-left: 4px solid #06b6d4; margin-top: 1rem;">
                    <h4 style="color: #1e293b;">¬øPara qu√© sirve?</h4>
                    <p>Para <strong>recordar en qu√© funci√≥n estamos</strong> mientras generamos c√≥digo.
                       Esto es √∫til para validaciones y para generar mensajes de error informativos.</p>
                </div>

                <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1rem; border: 2px solid #64748b;">
                    <h4 style="color: #1e293b;">üìã Usos de currentFunction</h4>

                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h5 style="color: #3b82f6;">1. Validar RETURN</h5>
                        <pre><code class="language-java">void visitReturnStatement(ReturnNode node) {
    if (currentFunction == null) {
        throw new Error("RETURN fuera de funci√≥n en l√≠nea " + node.getLine());
    }

    if (currentFunction.equals("main") && node.hasValue()) {
        throw new Error("main() no puede retornar valor en l√≠nea " + node.getLine());
    }

    // Generar c√≥digo...
}</code></pre>
                    </div>

                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h5 style="color: #3b82f6;">2. Rastreo de Contexto</h5>
                        <pre><code class="language-java">void visitFunctionDeclaration(FunctionNode node) {
    String previousFunction = currentFunction;
    currentFunction = node.getName();

    // Generar la funci√≥n...

    currentFunction = previousFunction;  // Restaurar
}</code></pre>
                    </div>

                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                        <h5 style="color: #3b82f6;">3. Mensajes de Error Descriptivos</h5>
                        <pre><code class="language-java">void reportError(String message, int line) {
    String context = currentFunction != null
        ? "en funci√≥n '" + currentFunction + "'"
        : "en scope global";

    System.err.println("Error " + context + " l√≠nea " + line + ": " + message);
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Resumen Final -->
            <div class="visitor-pattern-box" style="margin-top: 3rem;">
                <h3 style="color: #1e293b;">üìä Resumen: Los 4 Componentes del Estado del Generador</h3>

                <table style="width: 100%; border-collapse: collapse; background: white; margin-top: 1rem;">
                    <thead>
                        <tr style="background: #f59e0b; color: white;">
                            <th style="padding: 1rem; border: 1px solid #ddd; text-align: left;">Componente</th>
                            <th style="padding: 1rem; border: 1px solid #ddd; text-align: left;">¬øPara qu√© sirve?</th>
                            <th style="padding: 1rem; border: 1px solid #ddd; text-align: left;">¬øCu√°ndo cambia?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>StringBuilder code</code></td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Construir el c√≥digo JS l√≠nea por l√≠nea</td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Cada vez que visitamos un nodo</td>
                        </tr>
                        <tr style="background: #f8fafc;">
                            <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>int indentLevel</code></td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Formatear con indentaci√≥n correcta</td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Al entrar/salir de bloques <code>{ }</code></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>int loopCounter</code></td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Generar nombres √∫nicos (_i0, _i1...)</td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Cada REPEAT (nunca decrece)</td>
                        </tr>
                        <tr style="background: #f8fafc;">
                            <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>String currentFunction</code></td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Saber en qu√© funci√≥n estamos</td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd;">Al entrar/salir de funciones</td>
                        </tr>
                    </tbody>
                </table>

                <div class="key-insight" style="margin-top: 2rem; background: white; padding: 1.5rem; border-radius: 0.5rem;">
                    <h4 style="color: #1e293b;">üí° Lo M√°s Importante</h4>
                    <p style="font-size: 1.1rem;">
                        El generador NO es "stateless". Necesita <strong>recordar contexto</strong> mientras
                        recorre el AST. Estos 4 componentes forman la "memoria de trabajo" del generador,
                        permiti√©ndole generar c√≥digo correcto, bien formateado, y sin conflictos.
                    </p>
                    <p style="font-size: 1rem; margin-top: 1rem; color: #1e293b; background: #dcfce7; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid #10b981;">
                        <strong>‚úÖ Nota:</strong> Como RoboLang tiene un <strong>Analizador Sem√°ntico</strong> completo
                        en la Fase 3, el generador NO necesita validar scopes. Solo hace <strong>traducci√≥n mec√°nica</strong>
                        AST ‚Üí JavaScript.
                    </p>
                </div>
            </div>
        </div>

        <!-- Arquitectura del Generador -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üèóÔ∏è Arquitectura del Generador de C√≥digo</h2>

            <div class="architecture-box">
                <h3 style="color: #1e293b;">Componentes Principales</h3>
            </div>

            <div class="mermaid">
classDiagram
    class CodeGenerator {
        &lt;&lt;abstract&gt;&gt;
        +generate(ProgramNode): String
        #writeHeader(): void
        #writeFooter(): void
    }

    class JavaScriptCodeGenerator {
        -code: StringBuilder
        -indentLevel: int
        -loopCounter: int
        -currentFunction: String
        +generate(ProgramNode): String
        +visitProgram(ProgramNode): String
        +visitFunction(FunctionNode): String
        +visitRepeat(RepeatNode): String
        +visitIf(IfNode): String
        +visitAssignment(AssignmentNode): String
        -indent(): String
        -writeLine(String): void
    }

    class ASTVisitor {
        &lt;&lt;interface&gt;&gt;
        +visitProgram(ProgramNode): String
        +visitFunction(FunctionNode): String
        +visitRepeat(RepeatNode): String
        +visitIf(IfNode): String
    }

    class ProgramNode {
        +accept(Visitor): String
    }

    CodeGenerator &lt;|-- JavaScriptCodeGenerator
    ASTVisitor &lt;|.. JavaScriptCodeGenerator
    JavaScriptCodeGenerator ..&gt; ProgramNode
            </div>

            <div class="key-insight" style="margin-top: 2rem;">
                <h4 style="color: #1e293b;">üéØ Patr√≥n de Dise√±o: Visitor</h4>
                <p>
                    Usamos el patr√≥n <strong>Visitor</strong> para recorrer el AST.
                    Cada tipo de nodo tiene un m√©todo <code>visit()</code> que genera el c√≥digo correspondiente.
                </p>
            </div>
        </div>

        <!-- Fases del Proceso -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üìã Fases del Proceso de Generaci√≥n</h2>

            <div class="key-insight" style="margin-bottom: 2rem;">
                <h4 style="color: #1e293b;">üí° Construcci√≥n Paso a Paso</h4>
                <p>
                    El generador construye el archivo JavaScript <strong>secuencialmente</strong>,
                    agregando cada secci√≥n en orden. Imagina que est√°s escribiendo un documento
                    desde arriba hacia abajo, donde cada fase agrega una nueva parte.
                </p>
            </div>

            <div class="mermaid">
flowchart TD
    Start([Inicio]) --> Init[1. Inicializar]
    Init --> Header[2. Escribir Header]
    Header --> Vars[3. Variables Globales]
    Vars --> Funcs[4. Funciones Usuario]
    Funcs --> Main[5. Funci√≥n main]
    Main --> Footer[6. Footer y Ejecuci√≥n]
    Footer --> End([Archivo .js Completo])

    style Start fill:#fef3c7,stroke:#f59e0b,stroke-width:3px,color:#1e293b
    style End fill:#dcfce7,stroke:#10b981,stroke-width:3px,color:#1e293b
    style Init fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style Header fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style Vars fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style Funcs fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style Main fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style Footer fill:#dbeafe,stroke:#3b82f6,color:#1e293b
            </div>

            <div class="phase-timeline">
                <div class="phase-item" data-number="1">
                    <h3 style="color: #1e293b;">Inicializaci√≥n del Generador</h3>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
                        <strong style="color: #3b82f6;">¬øQu√© hace?</strong>
                        <p>Prepara las herramientas que necesitar√°s durante la generaci√≥n.</p>
                    </div>
                    <pre><code class="language-java">// Java - Constructor del generador
code = new StringBuilder();    // Donde ir√° el c√≥digo JS
indentLevel = 0;               // Nivel de indentaci√≥n actual
loopCounter = 0;               // Para generar _i0, _i1, etc.</code></pre>
                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; color: #1e293b;">
                        <strong>üîë An√°logo:</strong> Como un carpintero que saca sus herramientas antes de empezar.
                    </div>
                </div>

                <div class="phase-item" data-number="2">
                    <h3 style="color: #1e293b;">Header del Archivo JavaScript</h3>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
                        <strong style="color: #3b82f6;">¬øQu√© hace?</strong>
                        <p>Escribe comentarios informativos y obtiene la instancia del robot.</p>
                    </div>
                    <pre><code class="language-javascript">// JavaScript generado
// ============================================
// RoboLang Compiled Program
// Generated: 2025-10-27 18:00:00
// ============================================

const robot = RoboLangRuntime.getRobot();</code></pre>
                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; color: #1e293b;">
                        <strong>üîë An√°logo:</strong> Como poner el t√≠tulo y fecha en un documento.
                    </div>
                </div>

                <div class="phase-item" data-number="3">
                    <h3 style="color: #1e293b;">Declarar Variables Globales</h3>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
                        <strong style="color: #3b82f6;">¬øQu√© hace?</strong>
                        <p>Busca todos los <code>VAR</code> en el AST y los declara con <code>let</code>.</p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; margin: 1rem 0; align-items: center;">
                        <div style="background: #fef3c7; padding: 1rem; border-radius: 0.5rem;">
                            <strong>RoboLang</strong>
                            <pre style="margin-top: 0.5rem;"><code class="language-robolang">VAR pasos;
VAR temperatura;</code></pre>
                        </div>
                        <div style="font-size: 2rem; color: #f59e0b;">‚Üí</div>
                        <div style="background: #dcfce7; padding: 1rem; border-radius: 0.5rem;">
                            <strong>JavaScript</strong>
                            <pre style="margin-top: 0.5rem;"><code class="language-javascript">let pasos;
let temperatura;</code></pre>
                        </div>
                    </div>
                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; color: #1e293b;">
                        <strong>üîë Clave:</strong> Usamos <code>let</code> (ES6) en vez de <code>var</code> por mejor alcance.
                    </div>
                </div>

                <div class="phase-item" data-number="4">
                    <h3 style="color: #1e293b;">Generar Funciones de Usuario</h3>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
                        <strong style="color: #3b82f6;">¬øQu√© hace?</strong>
                        <p>Por cada <code>FUNCTION</code> en el AST, genera una <code>async function</code>.</p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; margin: 1rem 0; align-items: start;">
                        <div style="background: #fef3c7; padding: 1rem; border-radius: 0.5rem;">
                            <strong>RoboLang</strong>
                            <pre style="margin-top: 0.5rem;"><code class="language-robolang">FUNCTION mover(n) {
    REPEAT n {
        UP;
    }
}</code></pre>
                        </div>
                        <div style="font-size: 2rem; color: #f59e0b; padding-top: 2rem;">‚Üí</div>
                        <div style="background: #dcfce7; padding: 1rem; border-radius: 0.5rem;">
                            <strong>JavaScript</strong>
                            <pre style="margin-top: 0.5rem;"><code class="language-javascript">async function mover(n) {
    for (let _i0 = 0; _i0 < n; _i0++) {
        await robot.moveUp();
    }
}</code></pre>
                        </div>
                    </div>
                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; color: #1e293b;">
                        <strong>üîë Importante:</strong> TODAS las funciones son <code>async</code> porque pueden contener comandos de movimiento.
                    </div>
                </div>

                <div class="phase-item" data-number="5">
                    <h3 style="color: #1e293b;">Generar Funci√≥n main()</h3>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
                        <strong style="color: #3b82f6;">¬øQu√© hace?</strong>
                        <p>Traduce el bloque <code>MAIN { ... }</code> a una funci√≥n <code>async function main()</code>.</p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; margin: 1rem 0; align-items: start;">
                        <div style="background: #fef3c7; padding: 1rem; border-radius: 0.5rem;">
                            <strong>RoboLang</strong>
                            <pre style="margin-top: 0.5rem;"><code class="language-robolang">MAIN {
    pasos := 3;
    mover(pasos);
}</code></pre>
                        </div>
                        <div style="font-size: 2rem; color: #f59e0b; padding-top: 2rem;">‚Üí</div>
                        <div style="background: #dcfce7; padding: 1rem; border-radius: 0.5rem;">
                            <strong>JavaScript</strong>
                            <pre style="margin-top: 0.5rem;"><code class="language-javascript">async function main() {
    pasos = 3;
    await mover(pasos);
}</code></pre>
                        </div>
                    </div>
                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; color: #1e293b;">
                        <strong>üîë Punto de Entrada:</strong> <code>main()</code> es donde comienza la ejecuci√≥n.
                    </div>
                </div>

                <div class="phase-item" data-number="6">
                    <h3 style="color: #1e293b;">Footer: Ejecutar el Programa</h3>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
                        <strong style="color: #3b82f6;">¬øQu√© hace?</strong>
                        <p>Llama a <code>main()</code> y captura cualquier error que ocurra.</p>
                    </div>
                    <pre><code class="language-javascript">// Ejecutar el programa
main().catch(err => console.error('RoboLang Error:', err));</code></pre>
                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 0.5rem; margin-top: 0.5rem; color: #1e293b;">
                        <strong>üîë Seguridad:</strong> El <code>.catch()</code> asegura que los errores se muestren en consola.
                    </div>
                </div>
            </div>

            <div class="key-insight" style="margin-top: 2rem;">
                <h4 style="color: #1e293b;">üìù Archivo Completo Generado</h4>
                <p>Al final de las 6 fases, tenemos un archivo .js completo y ejecutable:</p>
                <pre style="background: white; padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem;"><code class="language-javascript">// ============================================
// RoboLang Compiled Program
// ============================================
const robot = RoboLangRuntime.getRobot();

let pasos;

async function mover(n) {
    for (let _i0 = 0; _i0 < n; _i0++) {
        await robot.moveUp();
    }
}

async function main() {
    pasos = 3;
    await mover(pasos);
}

main().catch(err => console.error('RoboLang Error:', err));</code></pre>
            </div>
        </div>

        <!-- Patr√≥n Visitor en Acci√≥n -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #8b5cf6;">üé® Patr√≥n Visitor en Acci√≥n</h2>

            <div class="visitor-pattern-box">
                <h3 style="color: #1e293b;">¬øC√≥mo funciona?</h3>
                <p>
                    Cada nodo del AST es "visitado" y genera su c√≥digo correspondiente.
                </p>
            </div>

            <div class="mermaid">
sequenceDiagram
    participant Gen as CodeGenerator
    participant AST as ProgramNode
    participant Func as FunctionNode
    participant Repeat as RepeatNode
    participant Cmd as CommandNode

    Gen->>AST: visit()
    AST->>Gen: visitProgram()
    Gen->>Func: visit()
    Func->>Gen: visitFunction()
    Gen->>Repeat: visit()
    Repeat->>Gen: visitRepeat()
    Gen->>Cmd: visit()
    Cmd->>Gen: visitCommand()
    Cmd-->>Gen: await robot.moveUp();
    Repeat-->>Gen: for loop completo
    Func-->>Gen: async function completa
    AST-->>Gen: C√≥digo completo
            </div>

            <div class="example-box" style="margin-top: 2rem;">
                <h4 style="color: #1e293b;">Ejemplo: Visitando un REPEAT</h4>
                <pre><code class="language-java">@Override
public String visitRepeatStatement(RepeatStatementNode node) {
    String loopVar = "_i" + loopCounter++;

    // for (let _i0 = 0; _i0 < count; _i0++) {
    writeLine("for (let " + loopVar + " = 0; " +
              loopVar + " < " + node.getCount() + "; " +
              loopVar + "++) {");

    indentLevel++;
    node.getBody().accept(this);  // Visitar el cuerpo
    indentLevel--;

    writeLine("}");
    return null;
}</code></pre>
            </div>
        </div>

        <!-- Tabla de Mapeo Completa -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üìä Tabla de Mapeo: RoboLang ‚Üí JavaScript</h2>

            <table style="width: 100%; border-collapse: collapse; margin-top: 1rem; background: white;">
                <thead>
                    <tr style="background: #f59e0b; color: white;">
                        <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">RoboLang</th>
                        <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">JavaScript</th>
                        <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">Notas</th>
                    </tr>
                </thead>
                <tbody style="color: #1e293b;">
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>UP;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>await robot.moveUp();</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Necesita <code>await</code></td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>PENDOWN;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>robot.penDown();</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">S√≠ncrono, sin <code>await</code></td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>VAR x;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>let x;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Variables ES6</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>x := 5;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>x = 5;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Asignaci√≥n simple</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>REPEAT 3 { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>for (let _i0 = 0; _i0 < 3; _i0++) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Variable √∫nica por loop</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>IF (cond) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>if (cond) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Directamente traducible</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>WHILE (cond) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>while (cond) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Igual sintaxis</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>BATTERY</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>robot.getSensor('BATTERY')</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">API del robot</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>a = b</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>a === b</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Igualdad estricta</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>AND</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>&&</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Operador l√≥gico</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>NOT</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>!</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Negaci√≥n</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>FUNCTION f(p) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>async function f(p) { }</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Siempre <code>async</code></td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>f(5);</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>await f(5);</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Llamadas con <code>await</code></td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>RETURN x;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;"><code>return x;</code></td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd;">Igual sintaxis</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Soluciones a los Retos -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #10b981;">‚úÖ Soluciones a los Retos</h2>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 1: Preservar Sem√°ntica</h3>
                <p><strong>Soluci√≥n:</strong> Usar el AST como fuente de verdad. Cada nodo tiene
                   toda la informaci√≥n sem√°ntica necesaria.</p>
            </div>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 2: Mapeo de Construcciones</h3>
                <p><strong>Soluci√≥n:</strong> Crear tabla de mapeo (vista arriba) y seguirla consistentemente.</p>
            </div>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 3: Nombres √önicos</h3>
                <p><strong>Soluci√≥n:</strong> Usar contador global para variables temporales.</p>
                <pre><code class="language-java">private int loopCounter = 0;

String getLoopVar() {
    return "_i" + loopCounter++;
}</code></pre>
            </div>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 4: Gesti√≥n de Contexto</h3>
                <p><strong>Soluci√≥n:</strong> Mantener estado del generador:</p>
                <pre><code class="language-java">private int indentLevel = 0;
private int loopCounter = 0;
private String currentFunction = null;</code></pre>
            </div>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 5: C√≥digo Legible</h3>
                <p><strong>Soluci√≥n:</strong> Helper para indentaci√≥n y formato:</p>
                <pre><code class="language-java">private String indent() {
    return "    ".repeat(indentLevel);
}

private void writeLine(String line) {
    code.append(indent()).append(line).append("\n");
}</code></pre>
            </div>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 6: Async/Await</h3>
                <p><strong>Soluci√≥n:</strong> Regla simple: comandos de movimiento necesitan <code>await</code>,
                   funciones de usuario son <code>async</code>.</p>
            </div>

            <div class="solution-box">
                <h3 style="color: #1e293b;">üí° Reto 7: Manejo de Errores</h3>
                <p><strong>Soluci√≥n:</strong> Lanzar excepci√≥n descriptiva con informaci√≥n de l√≠nea/columna:</p>
                <pre><code class="language-java">throw new CodeGeneratorException(
    "Unknown node type: " + node.getClass(),
    node.getLine(), node.getColumn()
);</code></pre>
            </div>
        </div>

        <!-- Ejemplo Paso a Paso -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üîç Ejemplo Paso a Paso</h2>

            <div class="example-box">
                <h3 style="color: #1e293b;">Generando c√≥digo para: <code>REPEAT 3 { UP; }</code></h3>
            </div>

            <div class="mermaid">
flowchart TD
    A[RepeatStatementNode] -->|1. getCount| B[NumberNode: 3]
    A -->|2. getBody| C[StatementBlockNode]
    C -->|3. getStatements| D[MovementCommandNode: UP]

    A -->|visit| E[Generar for loop]
    E -->|counter| F[Variable: _i0]
    E -->|limit| G[L√≠mite: 3]
    E -->|body| H[C√≥digo: await robot.moveUp]

    E --> I[C√≥digo Final Generado]

    style A fill:#fef3c7,stroke:#f59e0b,stroke-width:3px,color:#1e293b
    style I fill:#dcfce7,stroke:#10b981,stroke-width:3px,color:#1e293b
    style B fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style C fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style D fill:#dbeafe,stroke:#3b82f6,color:#1e293b
    style E fill:#fce7f3,stroke:#ec4899,color:#1e293b
    style F fill:#e0e7ff,stroke:#6366f1,color:#1e293b
    style G fill:#e0e7ff,stroke:#6366f1,color:#1e293b
    style H fill:#e0e7ff,stroke:#6366f1,color:#1e293b
            </div>

            <div class="phase-timeline" style="margin-top: 2rem;">
                <div class="phase-item" data-number="1">
                    <h4 style="color: #1e293b;">Visitar RepeatStatementNode</h4>
                    <pre><code class="language-java">visitRepeatStatement(node)</code></pre>
                </div>

                <div class="phase-item" data-number="2">
                    <h4 style="color: #1e293b;">Generar variable de loop</h4>
                    <pre><code class="language-java">String loopVar = "_i" + loopCounter++;  // "_i0"</code></pre>
                </div>

                <div class="phase-item" data-number="3">
                    <h4 style="color: #1e293b;">Escribir header del for</h4>
                    <pre><code class="language-javascript">for (let _i0 = 0; _i0 < 3; _i0++) {</code></pre>
                </div>

                <div class="phase-item" data-number="4">
                    <h4 style="color: #1e293b;">Aumentar indentaci√≥n y visitar body</h4>
                    <pre><code class="language-java">indentLevel++;
node.getBody().accept(this);</code></pre>
                </div>

                <div class="phase-item" data-number="5">
                    <h4 style="color: #1e293b;">Body genera su c√≥digo</h4>
                    <pre><code class="language-javascript">    await robot.moveUp();</code></pre>
                </div>

                <div class="phase-item" data-number="6">
                    <h4 style="color: #1e293b;">Cerrar loop</h4>
                    <pre><code class="language-java">indentLevel--;
writeLine("}");</code></pre>
                </div>
            </div>

            <div class="key-insight" style="margin-top: 2rem;">
                <h4 style="color: #1e293b;">üìù Resultado Final</h4>
                <pre><code class="language-javascript">for (let _i0 = 0; _i0 < 3; _i0++) {
    await robot.moveUp();
}</code></pre>
            </div>
        </div>

        <!-- Ejercicio Pr√°ctico -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #8b5cf6;">üéØ Ejercicio Pr√°ctico</h2>

            <div class="visitor-pattern-box">
                <h3 style="color: #1e293b;">üèãÔ∏è Reto: Implementa el generador</h3>
                <p>
                    Ahora que entiendes el proceso, tu tarea es implementar el
                    <code>JavaScriptCodeGenerator</code> siguiendo la especificaci√≥n.
                </p>
            </div>

            <div class="example-box">
                <h4 style="color: #1e293b;">Pasos a Seguir:</h4>
                <ol style="line-height: 2;">
                    <li>Leer la documentaci√≥n en <code>docs/CODIGO_INTERMEDIO_JS.md</code></li>
                    <li>Estudiar <code>docs/IMPLEMENTACION_CODEGEN.md</code></li>
                    <li>Crear clase <code>JavaScriptCodeGenerator</code></li>
                    <li>Implementar m√©todos <code>visit()</code> uno por uno</li>
                    <li>Escribir tests para cada m√©todo</li>
                    <li>Compilar programas de <code>examples/</code></li>
                    <li>Verificar que el JavaScript generado funciona</li>
                </ol>
            </div>

            <div class="challenge-box" style="margin-top: 2rem;">
                <h4 style="color: #1e293b;">‚ö° Mini-Desaf√≠o</h4>
                <p>
                    ¬øPuedes implementar el m√©todo <code>visitIfStatement()</code>?
                </p>
                <p style="margin-top: 1rem;">
                    <strong>Input:</strong> Nodo IfStatementNode con condici√≥n y bloques then/else<br>
                    <strong>Output:</strong> C√≥digo JavaScript con <code>if (...) { } else { }</code>
                </p>
            </div>
        </div>

        <!-- Recursos Adicionales -->
        <div class="content-section" style="color: #1e293b;">
            <h2 style="color: #f59e0b;">üìö Recursos y Documentaci√≥n</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #3b82f6;">
                    <h4 style="color: #3b82f6;">üìñ Especificaci√≥n</h4>
                    <p><code>docs/CODIGO_INTERMEDIO_JS.md</code></p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                        Especificaci√≥n completa del mapeo RoboLang ‚Üí JavaScript
                    </p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #10b981;">
                    <h4 style="color: #10b981;">üîß Gu√≠a de Implementaci√≥n</h4>
                    <p><code>docs/IMPLEMENTACION_CODEGEN.md</code></p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                        C√≥digo Java paso a paso para implementar el generador
                    </p>
                </div>

                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 2px solid #f59e0b;">
                    <h4 style="color: #f59e0b;">üìã √çndice</h4>
                    <p><code>docs/README.md</code></p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                        Gu√≠a de lectura y checklist de implementaci√≥n
                    </p>
                </div>
            </div>
        </div>

        <!-- Resumen Final -->
        <div class="phase-badge" style="margin-top: 3rem;">
            <h3 style="margin: 0; color: #1e293b;">üéì Resumen</h3>
            <ul style="text-align: left; margin-top: 1rem; line-height: 2; color: #1e293b;">
                <li>‚úì La generaci√≥n de c√≥digo transforma el AST en c√≥digo ejecutable</li>
                <li>‚úì Usamos el patr√≥n Visitor para recorrer el AST sistem√°ticamente</li>
                <li>‚úì Cada nodo del AST se mapea a c√≥digo JavaScript equivalente</li>
                <li>‚úì Los principales retos son: preservar sem√°ntica, generar nombres √∫nicos, manejar async/await</li>
                <li>‚úì El c√≥digo generado debe ser legible, correcto y eficiente</li>
                <li>‚úì La arquitectura se compone de: CodeGenerator, Visitors, y helpers (CodeBuilder, NameGenerator)</li>
            </ul>
        </div>

        <!-- Navegaci√≥n -->
        <div class="navigation-buttons">
            <a href="slide9-gui-demo.html" class="btn" style="background: var(--text-secondary); color: white;">
                ‚Üê Anterior: GUI Demo
            </a>
            <a href="index.html" class="btn btn-primary">
                üè† Volver al √çndice
            </a>
        </div>
    </main>

    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

    <!-- Mermaid.js -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#fef3c7',
                primaryTextColor: '#1e293b',
                primaryBorderColor: '#f59e0b',
                lineColor: '#94a3b8',
                secondaryColor: '#dbeafe',
                secondaryTextColor: '#1e293b',
                tertiaryColor: '#dcfce7',
                tertiaryTextColor: '#1e293b',
                noteBkgColor: '#fef3c7',
                noteTextColor: '#1e293b'
            }
        });
    </script>
</body>
</html>
