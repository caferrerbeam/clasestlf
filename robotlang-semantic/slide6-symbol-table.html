<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide 6: Tabla de S√≠mbolos | Universidad EAM</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        .slide-header {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
        }

        .concept-card {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border-left: 4px solid #ef4444;
            padding: 2rem;
            border-radius: 1rem;
            margin: 2rem 0;
        }

        .operation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .operation-card {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-sm);
        }

        .operation-card h5 {
            color: var(--primary-blue);
            margin-bottom: 0.75rem;
        }

        .symbol-table-viz {
            background: #1e293b;
            color: #e2e8f0;
            padding: 2rem;
            border-radius: 0.75rem;
            font-family: var(--font-mono);
            margin: 2rem 0;
        }

        .table-entry {
            background: #334155;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 0.5rem;
            border-left: 4px solid #10b981;
        }

        .error-example {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
        }

        .success-example {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
        }

        .use-case-section {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 0.75rem;
            margin: 2rem 0;
        }

        .use-case-example {
            background: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--accent-purple);
        }

        .data-flow {
            background: white;
            padding: 2rem;
            border-radius: 0.75rem;
            margin: 2rem 0;
        }

        .timeline {
            position: relative;
            padding-left: 3rem;
            margin: 2rem 0;
        }

        .timeline::before {
            content: "";
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-blue);
        }

        .timeline-item {
            position: relative;
            background: white;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-sm);
        }

        .timeline-item::before {
            content: "";
            position: absolute;
            left: -2.5rem;
            top: 1.5rem;
            width: 1rem;
            height: 1rem;
            background: var(--primary-blue);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 3px var(--primary-blue);
        }

        .code-comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .comparison-invalid {
            background: #fef2f2;
            border: 2px solid #ef4444;
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .comparison-valid {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .comparison-header {
            padding: 1rem;
            font-weight: 600;
            color: white;
        }

        .comparison-invalid .comparison-header {
            background: #ef4444;
        }

        .comparison-valid .comparison-header {
            background: #10b981;
        }

        .comparison-content {
            padding: 1.5rem;
        }

        @media (max-width: 768px) {
            .code-comparison-grid {
                grid-template-columns: 1fr;
            }

            .operation-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <h1>üìö Tabla de S√≠mbolos</h1>
                <p class="subtitle">Slide 6 - Estructura fundamental para el an√°lisis sem√°ntico</p>
            </div>
            <div class="course-info">
                <a href="index.html" class="btn" style="background: white; color: var(--primary-blue);">‚Üê Volver al √çndice</a>
            </div>
        </div>
    </header>

    <main class="main-content" style="max-width: 1200px; margin: 0 auto;">
        <div class="slide-header">
            <div class="slide-number">SLIDE 6 DE 7</div>
            <h2>Tabla de S√≠mbolos para An√°lisis Sem√°ntico</h2>
            <p style="margin-top: 0.5rem; font-size: 1.1rem;">
                La estructura de datos que permite rastrear y validar variables en el programa
            </p>
        </div>

        <!-- ¬øQu√© es una Tabla de S√≠mbolos? -->
        <div class="content-section">
            <h3>ü§î ¬øQu√© es una Tabla de S√≠mbolos?</h3>

            <div class="concept-card">
                <h4 style="color: #dc2626;">Definici√≥n</h4>
                <p style="font-size: 1.1rem; margin-top: 1rem;">
                    Una <strong>Tabla de S√≠mbolos (Symbol Table)</strong> es una estructura de datos utilizada
                    por compiladores e int√©rpretes para <strong>almacenar informaci√≥n sobre los identificadores</strong>
                    (variables, funciones, etc.) declarados en un programa.
                </p>
            </div>

            <div style="background: #f8fafc; padding: 2rem; border-radius: 0.75rem; margin-top: 2rem;">
                <h4>üéØ Prop√≥sito Principal</h4>
                <p>
                    La tabla de s√≠mbolos permite al compilador/int√©rprete:
                </p>
                <ul style="line-height: 1.8; margin-top: 1rem;">
                    <li>‚úÖ <strong>Rastrear</strong> qu√© variables han sido declaradas</li>
                    <li>‚úÖ <strong>Validar</strong> que las variables usadas existan</li>
                    <li>‚úÖ <strong>Detectar</strong> declaraciones duplicadas</li>
                    <li>‚úÖ <strong>Verificar</strong> que las variables est√©n inicializadas antes de usarse</li>
                    <li>‚úÖ <strong>Mantener</strong> informaci√≥n de tipo (integer, boolean, etc.)</li>
                    <li>‚úÖ <strong>Localizar</strong> errores sem√°nticos con l√≠nea y columna precisas</li>
                </ul>
            </div>

            <h4 style="margin-top: 2rem;">Analog√≠a: El Registro de Estudiantes</h4>
            <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); padding: 2rem; border-radius: 0.75rem; margin-top: 1rem;">
                <p>
                    Imagina la tabla de s√≠mbolos como un <strong>registro de estudiantes</strong> en una universidad:
                </p>
                <ul style="line-height: 1.8; margin-top: 1rem;">
                    <li>üìù Cuando un estudiante se matricula ‚Üí <strong>Declaraci√≥n de variable</strong></li>
                    <li>üîç Verificar si un estudiante est√° inscrito ‚Üí <strong>Lookup en la tabla</strong></li>
                    <li>‚ùå Intentar matricular el mismo estudiante dos veces ‚Üí <strong>Error de redeclaraci√≥n</strong></li>
                    <li>‚ö†Ô∏è Referenciar un estudiante no inscrito ‚Üí <strong>Error de variable no declarada</strong></li>
                    <li>üìä Informaci√≥n del estudiante (carrera, a√±o, etc.) ‚Üí <strong>Metadata (tipo, valor, etc.)</strong></li>
                </ul>
            </div>
        </div>

        <!-- ¬øQu√© Informaci√≥n Almacena? -->
        <div class="content-section">
            <h3>üì¶ ¬øQu√© Informaci√≥n Almacena?</h3>
            <p>
                Cada entrada en la tabla de s√≠mbolos contiene informaci√≥n detallada sobre una variable:
            </p>

            <div class="symbol-table-viz">
                <div style="margin-bottom: 1.5rem;">
                    <strong style="color: #10b981;">Ejemplo de Entrada en la Tabla:</strong>
                </div>
                <div class="table-entry">
                    <div><strong style="color: #fbbf24;">name:</strong> "contador"</div>
                    <div><strong style="color: #fbbf24;">type:</strong> INTEGER</div>
                    <div><strong style="color: #fbbf24;">declarationLine:</strong> 5</div>
                    <div><strong style="color: #fbbf24;">declarationColumn:</strong> 4</div>
                    <div><strong style="color: #fbbf24;">initialized:</strong> true</div>
                    <div><strong style="color: #fbbf24;">value:</strong> 10</div>
                </div>

                <div class="table-entry">
                    <div><strong style="color: #fbbf24;">name:</strong> "activo"</div>
                    <div><strong style="color: #fbbf24;">type:</strong> BOOLEAN</div>
                    <div><strong style="color: #fbbf24;">declarationLine:</strong> 8</div>
                    <div><strong style="color: #fbbf24;">declarationColumn:</strong> 4</div>
                    <div><strong style="color: #fbbf24;">initialized:</strong> false</div>
                    <div><strong style="color: #fbbf24;">value:</strong> null</div>
                </div>
            </div>

            <h4 style="margin-top: 2rem;">Campos de SymbolTableEntry:</h4>
            <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                <thead>
                    <tr style="background: var(--primary-blue); color: white;">
                        <th style="padding: 1rem; text-align: left;">Campo</th>
                        <th style="padding: 1rem; text-align: left;">Tipo</th>
                        <th style="padding: 1rem; text-align: left;">Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;"><code>name</code></td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">String</td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">Nombre de la variable</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;"><code>type</code></td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">SymbolType</td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">Tipo de dato (INTEGER, BOOLEAN, SENSOR, UNKNOWN)</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;"><code>declarationLine</code></td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">int</td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">L√≠nea donde se declar√≥</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;"><code>declarationColumn</code></td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">int</td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">Columna donde se declar√≥</td>
                    </tr>
                    <tr style="background: #f8fafc;">
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;"><code>initialized</code></td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">boolean</td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">¬øHa sido inicializada con un valor?</td>
                    </tr>
                    <tr>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;"><code>value</code></td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">Object</td>
                        <td style="padding: 1rem; border: 1px solid #e2e8f0;">Valor actual (si est√° disponible)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Operaciones B√°sicas -->
        <div class="content-section">
            <h3>‚öôÔ∏è Operaciones B√°sicas</h3>
            <p>
                La tabla de s√≠mbolos proporciona operaciones fundamentales para el an√°lisis sem√°ntico:
            </p>

            <div class="operation-grid">
                <div class="operation-card">
                    <h5>1. declare(name, line, column)</h5>
                    <p><strong>Qu√© hace:</strong></p>
                    <p>Agrega una nueva variable a la tabla de s√≠mbolos.</p>
                    <p style="margin-top: 1rem;"><strong>Cu√°ndo se usa:</strong></p>
                    <p>Cuando el visitor visita un <code>VariableDeclarationNode</code> (VAR).</p>
                    <p style="margin-top: 1rem;"><strong>Validaci√≥n:</strong></p>
                    <p>Retorna <code>false</code> si la variable ya existe (error de redeclaraci√≥n).</p>
                </div>

                <div class="operation-card">
                    <h5>2. isDeclared(name)</h5>
                    <p><strong>Qu√© hace:</strong></p>
                    <p>Verifica si una variable existe en la tabla.</p>
                    <p style="margin-top: 1rem;"><strong>Cu√°ndo se usa:</strong></p>
                    <p>Antes de usar una variable, para validar que fue declarada.</p>
                    <p style="margin-top: 1rem;"><strong>Retorna:</strong></p>
                    <p><code>true</code> si existe, <code>false</code> si no.</p>
                </div>

                <div class="operation-card">
                    <h5>3. get(name)</h5>
                    <p><strong>Qu√© hace:</strong></p>
                    <p>Obtiene la entrada completa de una variable.</p>
                    <p style="margin-top: 1rem;"><strong>Cu√°ndo se usa:</strong></p>
                    <p>Para acceder a toda la informaci√≥n de la variable (tipo, l√≠nea, valor, etc.).</p>
                    <p style="margin-top: 1rem;"><strong>Retorna:</strong></p>
                    <p><code>SymbolTableEntry</code> o <code>null</code> si no existe.</p>
                </div>

                <div class="operation-card">
                    <h5>4. initialize(name, value)</h5>
                    <p><strong>Qu√© hace:</strong></p>
                    <p>Marca una variable como inicializada y guarda su valor.</p>
                    <p style="margin-top: 1rem;"><strong>Cu√°ndo se usa:</strong></p>
                    <p>Cuando el visitor visita un <code>AssignmentNode</code> (:=).</p>
                    <p style="margin-top: 1rem;"><strong>Efecto:</strong></p>
                    <p>Actualiza <code>initialized = true</code> e infiere el tipo.</p>
                </div>

                <div class="operation-card">
                    <h5>5. validateUsage(name, line, column)</h5>
                    <p><strong>Qu√© hace:</strong></p>
                    <p>Valida que una variable est√© declarada antes de usarla.</p>
                    <p style="margin-top: 1rem;"><strong>Cu√°ndo se usa:</strong></p>
                    <p>Cuando el visitor encuentra un <code>IdentifierNode</code> siendo usado.</p>
                    <p style="margin-top: 1rem;"><strong>Efecto:</strong></p>
                    <p>Genera error si no est√° declarada, warning si no est√° inicializada.</p>
                </div>

                <div class="operation-card">
                    <h5>6. clear()</h5>
                    <p><strong>Qu√© hace:</strong></p>
                    <p>Limpia toda la tabla de s√≠mbolos.</p>
                    <p style="margin-top: 1rem;"><strong>Cu√°ndo se usa:</strong></p>
                    <p>Al iniciar un nuevo an√°lisis sem√°ntico.</p>
                    <p style="margin-top: 1rem;"><strong>Efecto:</strong></p>
                    <p>Resetea todos los s√≠mbolos, errores y warnings.</p>
                </div>
            </div>
        </div>

        <!-- Dise√±o para RoboLang -->
        <div class="content-section">
            <h3 style="color: #1e293b; font-size: 1.75rem; font-weight: 700;">üèóÔ∏è Dise√±o de la Tabla de S√≠mbolos para RoboLang</h3>

            <div class="mermaid">
graph LR
    subgraph "Tabla de S√≠mbolos"
        SymbolTable["<b>SymbolTable</b><br/>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br/>-symbols: Map<br/>-errors: List<br/>-warnings: List<br/>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br/>+declare()<br/>+isDeclared()<br/>+get()<br/>+initialize()<br/>+validateUsage()<br/>+getErrors()<br/>+hasErrors()"]
    end

    subgraph "Entrada de S√≠mbolo"
        Entry["<b>SymbolTableEntry</b><br/>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br/>-name: String<br/>-type: SymbolType<br/>-declarationLine: int<br/>-declarationColumn: int<br/>-initialized: boolean<br/>-value: Object<br/>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br/>+getName()<br/>+getType()<br/>+isInitialized()<br/>+getValue()<br/>+setValue()"]
    end

    subgraph "Tipo de S√≠mbolo"
        SymType["<b>SymbolType</b><br/><i>enum</i><br/>‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ<br/>UNKNOWN<br/>INTEGER<br/>BOOLEAN<br/>SENSOR"]
    end

    SymbolTable -->|"contiene *"| Entry
    Entry -->|"tiene"| SymType

    style SymbolTable fill:#fecaca,color:#1e293b,stroke:#dc2626,stroke-width:3px
    style Entry fill:#bfdbfe,color:#1e293b,stroke:#1d4ed8,stroke-width:3px
    style SymType fill:#a7f3d0,color:#1e293b,stroke:#047857,stroke-width:3px
            </div>

            <h4 style="margin-top: 2rem;">Decisiones de Dise√±o:</h4>
            <div style="background: #f8fafc; padding: 2rem; border-radius: 0.75rem; margin-top: 1rem;">
                <ol style="line-height: 2;">
                    <li><strong>Map vs List:</strong>
                        <ul style="margin-top: 0.5rem;">
                            <li>Usamos <code>Map&lt;String, SymbolTableEntry&gt;</code> para b√∫squedas O(1)</li>
                            <li>La clave es el nombre de la variable</li>
                            <li>M√°s eficiente que recorrer una lista</li>
                        </ul>
                    </li>
                    <li style="margin-top: 1rem;"><strong>LinkedHashMap:</strong>
                        <ul style="margin-top: 0.5rem;">
                            <li>Mantiene el orden de inserci√≥n</li>
                            <li>√ötil para mostrar variables en el orden que fueron declaradas</li>
                        </ul>
                    </li>
                    <li style="margin-top: 1rem;"><strong>Listas de Errores y Warnings:</strong>
                        <ul style="margin-top: 0.5rem;">
                            <li>Acumulamos todos los errores, no solo el primero</li>
                            <li>Mejor experiencia de usuario: ve todos los problemas de una vez</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Casos de Uso -->
        <div class="content-section">
            <h3>üéØ Casos de Uso en An√°lisis Sem√°ntico</h3>

            <h4>Caso 1: Detecci√≥n de Variables No Declaradas</h4>
            <div class="code-comparison-grid">
                <div class="comparison-invalid">
                    <div class="comparison-header">‚ùå C√ìDIGO INV√ÅLIDO</div>
                    <div class="comparison-content">
                        <pre><code class="language-robolang">// ERROR: 'contador' no declarado
contador := 5</code></pre>
                        <div class="error-example" style="margin-top: 1rem;">
                            <strong>Error Detectado:</strong>
                            <p style="margin-top: 0.5rem;">
                                ‚ùå Variable 'contador' no declarada (usada en l√≠nea 2:1)
                            </p>
                        </div>
                    </div>
                </div>

                <div class="comparison-valid">
                    <div class="comparison-header">‚úÖ C√ìDIGO V√ÅLIDO</div>
                    <div class="comparison-content">
                        <pre><code class="language-robolang">VAR contador
contador := 5</code></pre>
                        <div class="success-example" style="margin-top: 1rem;">
                            <strong>An√°lisis Exitoso:</strong>
                            <p style="margin-top: 0.5rem;">
                                ‚úÖ Variable 'contador' declarada en 1:4<br>
                                ‚úÖ Inicializada en 2:1 con valor 5
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <h4 style="margin-top: 2.5rem;">Caso 2: Detecci√≥n de Redeclaraciones</h4>
            <div class="code-comparison-grid">
                <div class="comparison-invalid">
                    <div class="comparison-header">‚ùå C√ìDIGO INV√ÅLIDO</div>
                    <div class="comparison-content">
                        <pre><code class="language-robolang">VAR pasos
VAR pasos  // ERROR: Redeclaraci√≥n</code></pre>
                        <div class="error-example" style="margin-top: 1rem;">
                            <strong>Error Detectado:</strong>
                            <p style="margin-top: 0.5rem;">
                                ‚ùå Variable 'pasos' ya fue declarada en l√≠nea 1:4
                            </p>
                        </div>
                    </div>
                </div>

                <div class="comparison-valid">
                    <div class="comparison-header">‚úÖ C√ìDIGO V√ÅLIDO</div>
                    <div class="comparison-content">
                        <pre><code class="language-robolang">VAR pasos
VAR distancia  // OK: Diferente nombre</code></pre>
                        <div class="success-example" style="margin-top: 1rem;">
                            <strong>An√°lisis Exitoso:</strong>
                            <p style="margin-top: 0.5rem;">
                                ‚úÖ Variable 'pasos' declarada en 1:4<br>
                                ‚úÖ Variable 'distancia' declarada en 2:4
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <h4 style="margin-top: 2.5rem;">Caso 3: Verificaci√≥n de Inicializaci√≥n</h4>
            <div class="use-case-example">
                <pre><code class="language-robolang">VAR nivel
// Advertencia: 'nivel' usado sin inicializar
IF (nivel > 50) {
    UP;
}</code></pre>
                <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; margin-top: 1rem; border-radius: 0.5rem;">
                    <strong>‚ö†Ô∏è Warning Generado:</strong>
                    <p style="margin-top: 0.5rem;">
                        Variable 'nivel' podr√≠a no estar inicializada (usada en l√≠nea 3:5)
                    </p>
                </div>
            </div>
        </div>

        <!-- Flujo de Trabajo con la Tabla de S√≠mbolos -->
        <div class="content-section">
            <h3>üîÑ Flujo de Trabajo: Construyendo la Tabla durante el An√°lisis</h3>

            <div class="timeline">
                <div class="timeline-item">
                    <h5>1. Inicio del An√°lisis</h5>
                    <p>El <code>SemanticAnalyzerVisitor</code> crea una tabla de s√≠mbolos vac√≠a</p>
                    <div class="symbol-table-viz" style="margin-top: 1rem;">
Table de S√≠mbolos: {}
Errores: []
Warnings: []
                    </div>
                </div>

                <div class="timeline-item">
                    <h5>2. Encuentra VAR pasos</h5>
                    <p>Llama a <code>symbolTable.declare("pasos", 1, 4)</code></p>
                    <div class="symbol-table-viz" style="margin-top: 1rem;">
Table de S√≠mbolos: {
  "pasos": { name: "pasos", type: UNKNOWN, line: 1, col: 4, initialized: false }
}
                    </div>
                </div>

                <div class="timeline-item">
                    <h5>3. Encuentra pasos := 5</h5>
                    <p>Llama a <code>symbolTable.validateUsage("pasos", 2, 1)</code> ‚úÖ</p>
                    <p>Llama a <code>symbolTable.initialize("pasos", 5)</code></p>
                    <div class="symbol-table-viz" style="margin-top: 1rem;">
Table de S√≠mbolos: {
  "pasos": { name: "pasos", type: INTEGER, line: 1, col: 4, initialized: true, value: 5 }
}
                    </div>
                </div>

                <div class="timeline-item">
                    <h5>4. Encuentra REPEAT pasos</h5>
                    <p>Llama a <code>symbolTable.validateUsage("pasos", 4, 8)</code> ‚úÖ</p>
                    <p>Variable v√°lida y inicializada, contin√∫a sin errores</p>
                </div>

                <div class="timeline-item">
                    <h5>5. Fin del An√°lisis</h5>
                    <p>Verifica si hay errores acumulados</p>
                    <div class="symbol-table-viz" style="margin-top: 1rem;">
hasErrors(): false
hasWarnings(): false
‚úÖ An√°lisis sem√°ntico exitoso
                    </div>
                </div>
            </div>
        </div>

        <!-- Implementaci√≥n en Java -->
        <div class="content-section">
            <h3>üíª Implementaci√≥n en Java</h3>

            <!-- Ubicaci√≥n de archivos -->
            <div style="background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); border-left: 4px solid #ef4444; padding: 1.5rem; border-radius: 0.75rem; margin: 2rem 0;">
                <h4 style="color: #991b1b; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                    üìÅ Ubicaci√≥n en el Proyecto
                </h4>
                <p style="margin: 0; color: var(--text-secondary);">
                    Revisa las implementaciones completas en:
                </p>
                <pre style="background: #1e293b; color: #10b981; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; font-family: var(--font-mono); font-size: 0.9rem;"><code>src/main/java/semantic/identifiers/SymbolTable.java
src/main/java/semantic/identifiers/SymbolTableEntry.java</code></pre>
                <p style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚ö†Ô∏è <strong>Ejercicios:</strong> Los m√©todos <code>declare()</code> y <code>validateUsage()</code> est√°n marcados como ejercicios para que los completes.
                </p>
            </div>

            <p>
                Veamos la estructura b√°sica de la implementaci√≥n. Primero definimos <code>SymbolTableEntry</code>,
                que representa cada variable en la tabla:
            </p>

            <h4 style="margin-top: 2rem;">Clase SymbolTableEntry</h4>

            <!-- Ubicaci√≥n espec√≠fica de SymbolTableEntry -->
            <div style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 0.5rem; margin: 1.5rem 0;">
                <p style="margin: 0; font-size: 0.9rem; color: #1e40af;">
                    üìç <strong>Ubicaci√≥n:</strong> <code style="background: #1e293b; color: #10b981; padding: 0.25rem 0.5rem; border-radius: 0.25rem;">src/main/java/semantic/identifiers/SymbolTableEntry.java</code>
                </p>
            </div>

            <pre><code class="language-java">/**
 * Representa una entrada en la tabla de s√≠mbolos.
 * Almacena toda la informaci√≥n sobre una variable declarada.
 */
public class SymbolTableEntry {
    private String name;                  // Nombre de la variable
    private SymbolType type;              // Tipo: INTEGER, BOOLEAN, SENSOR, etc.
    private int declarationLine;          // L√≠nea donde fue declarada
    private int declarationColumn;        // Columna donde fue declarada
    private boolean initialized;          // ¬øYa tiene valor asignado?
    private Object value;                 // Valor actual (si est√° inicializada)

    /**
     * Constructor: crea una entrada sin inicializar
     */
    public SymbolTableEntry(String name, int line, int column) {
        this.name = name;
        this.type = SymbolType.UNKNOWN;   // Tipo desconocido inicialmente
        this.declarationLine = line;
        this.declarationColumn = column;
        this.initialized = false;         // No inicializada por defecto
        this.value = null;
    }

    // Getters
    public String getName() { return name; }
    public SymbolType getType() { return type; }
    public int getDeclarationLine() { return declarationLine; }
    public int getDeclarationColumn() { return declarationColumn; }
    public boolean isInitialized() { return initialized; }
    public Object getValue() { return value; }

    // Setters
    public void setType(SymbolType type) {
        this.type = type;
    }

    public void setValue(Object value) {
        this.value = value;
        this.initialized = true;  // Marcar como inicializada al asignar valor
    }

    @Override
    public String toString() {
        return String.format("%s (%s) declarada en %d:%d%s",
            name, type,
            declarationLine, declarationColumn,
            initialized ? " [inicializada]" : " [no inicializada]"
        );
    }
}</code></pre>

            <h4 style="margin-top: 2rem;">Clase SymbolTable</h4>
            <p>
                Ahora veamos la tabla de s√≠mbolos que gestiona todas las entradas:
            </p>

            <!-- Ubicaci√≥n espec√≠fica de SymbolTable -->
            <div style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 0.5rem; margin: 1.5rem 0;">
                <p style="margin: 0; font-size: 0.9rem; color: #1e40af;">
                    üìç <strong>Ubicaci√≥n:</strong> <code style="background: #1e293b; color: #10b981; padding: 0.25rem 0.5rem; border-radius: 0.25rem;">src/main/java/semantic/identifiers/SymbolTable.java</code>
                </p>
            </div>

            <pre><code class="language-java">public class SymbolTable {
    // Almacenamiento: nombre ‚Üí entrada
    private Map&lt;String, SymbolTableEntry&gt; symbols;

    // Acumuladores de errores y warnings
    private List&lt;String&gt; errors;
    private List&lt;String&gt; warnings;

    public SymbolTable() {
        this.symbols = new LinkedHashMap&lt;&gt;(); // Mantiene orden
        this.errors = new ArrayList&lt;&gt;();
        this.warnings = new ArrayList&lt;&gt;();
    }

    /**
     * ‚ö†Ô∏è EJERCICIO: Declara una nueva variable
     *
     * Este m√©todo debe:
     * 1. Verificar si la variable YA existe en la tabla (usar symbols.containsKey)
     * 2. Si existe:
     *    - Agregar un error a la lista de errores indicando que fue redeclarada
     *    - Incluir en el mensaje la l√≠nea donde fue declarada originalmente
     *    - Retornar false
     * 3. Si NO existe:
     *    - Crear una nueva SymbolTableEntry con el nombre, l√≠nea y columna
     *    - Agregarla al mapa symbols
     *    - Retornar true
     *
     * @param name   Nombre de la variable a declarar
     * @param line   L√≠nea donde se declara
     * @param column Columna donde se declara
     * @return true si se declar√≥ correctamente, false si ya exist√≠a
     */
    public boolean declare(String name, int line, int column) {
        // TODO: Implementar la l√≥gica de declaraci√≥n
        // Hint: Usa symbols.containsKey(name) para verificar si existe
        // Hint: Usa symbols.put(name, entry) para agregar una nueva entrada

        throw new UnsupportedOperationException("M√©todo declare no implementado - EJERCICIO");
    }

    /**
     * ‚ö†Ô∏è EJERCICIO: Valida que una variable est√© declarada antes de usarse
     *
     * Este m√©todo debe:
     * 1. Verificar si la variable est√° declarada (usar isDeclared)
     * 2. Si NO est√° declarada:
     *    - Agregar un error indicando que se us√≥ sin declarar
     *    - Incluir l√≠nea y columna donde se us√≥
     *    - Retornar false
     * 3. Si S√ç est√° declarada:
     *    - Obtener la entrada de la tabla (usar symbols.get)
     *    - Verificar si est√° inicializada (usar entry.isInitialized())
     *    - Si NO est√° inicializada: agregar un WARNING (no error)
     *    - Retornar true
     *
     * Diferencia importante:
     * - Variable no declarada = ERROR (detiene compilaci√≥n)
     * - Variable no inicializada = WARNING (solo advertencia)
     *
     * @param name   Nombre de la variable que se est√° usando
     * @param line   L√≠nea donde se usa
     * @param column Columna donde se usa
     * @return true si la validaci√≥n pas√≥, false si hay error
     */
    public boolean validateUsage(String name, int line, int column) {
        // TODO: Implementar la l√≥gica de validaci√≥n de uso
        // Hint: Primero verifica con isDeclared(name)
        // Hint: Luego verifica inicializaci√≥n con entry.isInitialized()
        // Hint: Usa errors.add() para errores y warnings.add() para advertencias

        throw new UnsupportedOperationException("M√©todo validateUsage no implementado - EJERCICIO");
    }

    /**
     * Marca una variable como inicializada
     */
    public void initialize(String name, Object value) {
        SymbolTableEntry entry = symbols.get(name);
        if (entry != null) {
            entry.setValue(value);

            // Inferir tipo basado en el valor
            if (value instanceof Integer) {
                entry.setType(SymbolType.INTEGER);
            } else if (value instanceof Boolean) {
                entry.setType(SymbolType.BOOLEAN);
            }
        }
    }

    // ... otros m√©todos (get, clear, etc.)
}</code></pre>
        </div>

        <!-- Resumen -->
        <div class="content-section">
            <h3>üìö Resumen del Slide</h3>
            <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.75rem;">
                <h4>Has aprendido:</h4>
                <ul style="line-height: 1.8;">
                    <li>‚úÖ La tabla de s√≠mbolos <strong>almacena informaci√≥n sobre variables</strong> declaradas</li>
                    <li>‚úÖ Cada entrada contiene: nombre, tipo, l√≠nea, columna, estado de inicializaci√≥n y valor</li>
                    <li>‚úÖ <strong>Operaciones b√°sicas:</strong> declare, isDeclared, get, initialize, validateUsage</li>
                    <li>‚úÖ Usamos <strong>Map&lt;String, SymbolTableEntry&gt;</strong> para b√∫squedas eficientes</li>
                    <li>‚úÖ La tabla <strong>acumula errores y warnings</strong> durante el an√°lisis</li>
                    <li>‚úÖ Casos de uso: detectar variables no declaradas, redeclaraciones, variables no inicializadas</li>
                    <li>‚úÖ Se construye din√°micamente durante el recorrido del AST con el visitor</li>
                </ul>

                <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); border: 2px solid #f59e0b; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1.5rem;">
                    <h4>üéØ Pr√≥ximo Paso</h4>
                    <p>
                        Ahora que entiendes qu√© es la tabla de s√≠mbolos y c√≥mo funciona,
                        en el siguiente slide ver√°s c√≥mo <strong>implementar el SemanticAnalyzerVisitor</strong>,
                        el visitor que construye y usa la tabla de s√≠mbolos para validar el programa.
                    </p>
                </div>
            </div>
        </div>

        <!-- Navegaci√≥n -->
        <div class="navigation-buttons">
            <a href="slide5-sensorusage-exercise.html" class="btn" style="background: var(--text-secondary);">
                ‚Üê Anterior: Ejercicio SensorUsageVisitor
            </a>
            <a href="slide7-semantic-analyzer.html" class="btn btn-primary">
                Siguiente: SemanticAnalyzerVisitor ‚Üí
            </a>
        </div>
    </main>

    <footer style="text-align: center; padding: 2rem; background: var(--bg-dark); color: var(--text-white); margin-top: 3rem;">
        <p>Universidad EAM - Teor√≠a de Lenguajes Formales</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">
            Slide 6: Tabla de S√≠mbolos para An√°lisis Sem√°ntico
        </p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#ef4444',
                primaryTextColor: '#fff',
                primaryBorderColor: '#dc2626',
                lineColor: '#94a3b8',
                secondaryColor: '#3b82f6',
                tertiaryColor: '#10b981'
            }
        });
    </script>
</body>
</html>
