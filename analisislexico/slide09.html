<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implementaci√≥n de nextToken()</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #E91E63 0%, #9C27B0 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            color: white;
        }

        h1 {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 2rem;
            text-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: slideDown 0.6s ease-out;
        }

        .strategies-container {
            display: flex;
            flex-direction: column;
            gap: 3rem;
            max-width: 1600px;
            width: 100%;
        }

        .strategy-card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 2rem;
            color: #333;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            animation: slideInLeft 0.8s ease-out 0.2s both;
        }

        .code-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #444;
        }

        .code-title {
            font-size: 1.5rem;
            color: #66d9ef;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-container {
            overflow-x: auto;
            animation: fadeIn 1s ease-out 0.6s both;
        }

        pre {
            margin: 0;
            font-size: 1rem;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.6;
        }

        .comparison-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            animation: slideInRight 0.8s ease-out 0.4s both;
        }

        .info-card {
            background: rgba(255,255,255,0.95);
            color: #333;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideInRight 0.8s ease-out;
            animation-fill-mode: both;
            transition: transform 0.3s;
        }

        .info-card:hover {
            transform: scale(1.05);
        }

        .info-card:nth-child(1) { animation-delay: 0.4s; }
        .info-card:nth-child(2) { animation-delay: 0.6s; }
        .info-card:nth-child(3) { animation-delay: 0.8s; }

        .info-title {
            font-size: 1.3rem;
            color: #E91E63;
            margin-bottom: 0.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .info-content {
            line-height: 1.6;
            color: #666;
        }

        .highlight-box {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            padding: 0.2rem 0.5rem;
            border-radius: 5px;
            font-weight: bold;
            display: inline-block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .principle {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
            padding: 1rem;
            border-radius: 10px;
            margin-top: 0.5rem;
        }

        @keyframes slideDown {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .nav-buttons {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .nav-btn {
            background: rgba(255,255,255,0.95);
            border: none;
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .nav-btn:hover {
            transform: scale(1.1);
        }

        .slide-number {
            position: fixed;
            top: 30px;
            right: 30px;
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .icon {
            font-size: 1.2rem;
        }

        /* Efecto de l√≠neas de c√≥digo resaltadas */
        .token.keyword { animation: glow 3s infinite; }
        
        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }
    </style>
</head>
<body>
    <div class="slide-number">9 / 14</div>
    
    <h1>üíª Implementaciones de nextToken()</h1>
    
    <div class="strategies-container" style="display: flex; flex-direction: column; gap: 3rem; max-width: 1600px; width: 100%;">
        
        <!-- Estrategia 1: M√∫ltiples AFDs -->
        <div class="strategy-card" style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 2rem; color: #333; box-shadow: 0 15px 40px rgba(0,0,0,0.3);">
            <div class="strategy-title" style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; text-align: center; padding: 1rem; border-radius: 10px; margin-bottom: 2rem; font-size: 1.8rem;">
                üîÑ Estrategia 1: M√∫ltiples AFDs (N Matchers)
            </div>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
                <div class="code-container" style="background: #272822; border-radius: 15px; padding: 1.5rem; overflow-x: auto;">
                    <pre style="color: #f8f8f2; font-size: 0.9rem; line-height: 1.4; margin: 0;"><code>public class MultipleFALexer {
    private List&lt;TokenMatcher&gt; matchers;
    
    public MultipleFALexer() {
        matchers = Arrays.asList(
            new OperatorMatcher(),     // ‚ùå ORDEN CR√çTICO!
            new IdentifierMatcher(),
            new NumberMatcher(),
            new StringMatcher()
        );
    }
    
    public Token nextToken(String input, int pos) {
        for (TokenMatcher matcher : matchers) {
            Token token = matcher.tryMatch(input, pos);
            if (token != null) {
                return token; // ‚ùå PRIMER MATCH GANA
            }
        }
        throw new LexicalException("Invalid token");
    }
}

// ‚ùå PROBLEMA: OperatorMatcher devuelve "=" 
// cuando encuentra "==", violando Maximal Munch</code></pre>
                </div>
                
                <div class="problem-examples" style="background: #ffebee; border-radius: 10px; padding: 1.5rem;">
                    <h4 style="color: #c62828; margin-bottom: 1rem;">‚ùå Problemas</h4>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        <strong>Input: "=="</strong><br>
                        OperatorMatcher: "=" ‚ùå<br>
                        Deber√≠a ser: "==" ‚úÖ<br><br>
                        
                        <strong>Input: "++"</strong><br>
                        OperatorMatcher: "+" ‚ùå<br>
                        Deber√≠a ser: "++" ‚úÖ<br><br>
                        
                        <strong>Input: "ifVar"</strong><br>
                        OperatorMatcher: rechaza<br>
                        IdentifierMatcher: "ifVar" ‚úÖ<br>
                        <span style="color: #f44336;">2 evaluaciones!</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Estrategia 2: AFD √önico -->
        <div class="strategy-card" style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 2rem; color: #333; box-shadow: 0 15px 40px rgba(0,0,0,0.3);">
            <div class="strategy-title" style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; text-align: center; padding: 1rem; border-radius: 10px; margin-bottom: 2rem; font-size: 1.8rem;">
                ‚ö° Estrategia 2: AFD √önico Global
            </div>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
                <div class="code-container" style="background: #272822; border-radius: 15px; padding: 1.5rem; overflow-x: auto;">
                    <pre style="color: #f8f8f2; font-size: 0.9rem; line-height: 1.4; margin: 0;"><code>public class SingleFALexer {
    enum State {
        START, ID, NUM, EQUAL, PLUS, 
        DOUBLE_EQUAL, DOUBLE_PLUS, ERROR
    }
    
    public Token nextToken(String input, int pos) {
        State state = START;
        int start = pos;
        
        // ‚úÖ UN SOLO PASE sobre el input
        while (pos < input.length()) {
            char c = input.charAt(pos);
            state = transition(state, c);
            
            if (state == ERROR) break;
            pos++;
        }
        
        // ‚úÖ MAXIMAL MUNCH AUTOM√ÅTICO
        return createToken(state, input, start, pos);
    }
    
    private State transition(State state, char c) {
        switch (state) {
            case START:
                if (Character.isLetter(c)) return ID;
                if (Character.isDigit(c)) return NUM;
                if (c == '=') return EQUAL;
                if (c == '+') return PLUS;
                return ERROR;
            case EQUAL:
                return (c == '=') ? DOUBLE_EQUAL : ERROR;
            case PLUS:
                return (c == '+') ? DOUBLE_PLUS : ERROR;
            // ... m√°s transiciones
        }
    }
}</code></pre>
                </div>
                
                <div class="solution-examples" style="background: #e8f5e9; border-radius: 10px; padding: 1.5rem;">
                    <h4 style="color: #2e7d32; margin-bottom: 1rem;">‚úÖ Soluciones</h4>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        <strong>Input: "=="</strong><br>
                        START ‚Üí EQUAL ‚Üí DOUBLE_EQUAL<br>
                        Result: Token(EQUALS, "==") ‚úÖ<br><br>
                        
                        <strong>Input: "++"</strong><br>
                        START ‚Üí PLUS ‚Üí DOUBLE_PLUS<br>
                        Result: Token(INCREMENT, "++") ‚úÖ<br><br>
                        
                        <strong>Input: "ifVar"</strong><br>
                        START ‚Üí ID ‚Üí ID ‚Üí ID ‚Üí ID ‚Üí ID<br>
                        Result: Token(ID, "ifVar") ‚úÖ<br>
                        <span style="color: #4caf50;">1 evaluaci√≥n!</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comparaci√≥n Visual -->
        <div class="comparison-card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 20px; padding: 2rem; text-align: center;">
            <h3 style="font-size: 2rem; margin-bottom: 2rem;">üéØ El Problema del Maximal Munch</h3>
            
            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 3rem; align-items: center;">
                <div style="background: rgba(231,76,60,0.2); padding: 1.5rem; border-radius: 15px;">
                    <h4 style="color: #ffcdd2; margin-bottom: 1rem;">‚ùå M√∫ltiples AFDs</h4>
                    <div style="font-size: 1.1rem; line-height: 1.6;">
                        ‚Ä¢ Orden de matchers importa<br>
                        ‚Ä¢ Primer match gana<br>
                        ‚Ä¢ "=" antes que "=="<br>
                        ‚Ä¢ "+" antes que "++"<br>
                        ‚Ä¢ <strong>Viola Maximal Munch</strong>
                    </div>
                </div>
                
                <div style="font-size: 3rem;">VS</div>
                
                <div style="background: rgba(39,174,96,0.2); padding: 1.5rem; border-radius: 15px;">
                    <h4 style="color: #c8e6c9; margin-bottom: 1rem;">‚úÖ AFD √önico</h4>
                    <div style="font-size: 1.1rem; line-height: 1.6;">
                        ‚Ä¢ Estados espec√≠ficos para cada caso<br>
                        ‚Ä¢ Consume hasta no poder m√°s<br>
                        ‚Ä¢ "==" autom√°ticamente<br>
                        ‚Ä¢ "++" autom√°ticamente<br>
                        ‚Ä¢ <strong>Maximal Munch inherente</strong>
                    </div>
                </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 1.5rem; margin-top: 2rem;">
                <h4 style="margin-bottom: 1rem;">üí° Ejemplo Cr√≠tico: "=="</h4>
                <p style="font-size: 1.2rem; line-height: 1.6;">
                    <strong>M√∫ltiples AFDs:</strong> OperatorMatcher ve '=' y retorna Token(ASSIGN, "=")<br>
                    <strong>AFD √önico:</strong> Ve '=' ‚Üí EQUAL, ve '=' ‚Üí DOUBLE_EQUAL ‚Üí Token(EQUALS, "==")
                </p>
            </div>
        </div>
    </div>

    <div class="nav-buttons">
        <button class="nav-btn" onclick="window.location.href='slide08.html'">‚Üê Anterior</button>
        <button class="nav-btn" onclick="window.location.href='slide10.html'">Siguiente ‚Üí</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script>
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                window.location.href = 'slide10.html';
            } else if (e.key === 'ArrowLeft') {
                window.location.href = 'slide08.html';
            }
        });
    </script>
</body>
</html>